<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>【tensorflow】TFRecord数据读写</title>
      <link href="/2019/12/25/tensorflow-tfrecord-process/"/>
      <url>/2019/12/25/tensorflow-tfrecord-process/</url>
      
        <content type="html"><![CDATA[<p>TFRecord&#x683C;&#x5F0F;&#x662F;&#x5B98;&#x65B9;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7684;&#x6A21;&#x578B;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;&#x6A21;&#x578B;&#x5728;&#x8BAD;&#x7EC3;&#x548C;&#x9884;&#x6D4B;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;TFRecord&#x683C;&#x5F0F;&#x7528;&#x4E8E;&#x7EC4;&#x7EC7;&#x6A21;&#x578B;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x90E8;&#x5206;&#x3002;</p><p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;TFRecord&#x6765;&#x5B58;&#x50A8;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x4E5F;&#x4F7F;&#x7528;TFRecord&#x7684;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x6A21;&#x578B;&#x8BA1;&#x7B97;&#x7684;&#x8F93;&#x5165;&#x3002;</p><p>TFRecord&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF0C;&#x80FD;&#x591F;&#x4EE5;&#x8F83;&#x5C0F;&#x7684;&#x7A7A;&#x95F4;&#x6765;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x643A;&#x5E26;&#x3002;&#x5BF9;&#x4E8E;&#x57FA;&#x4E8E;Tensorflow Serving&#x8FD9;&#x79CD;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x6253;&#x5206;&#x5F62;&#x5F0F;&#xFF0C;&#x8F83;&#x5C0F;&#x7684;&#x4F20;&#x8F93;&#x6570;&#x636E;&#xFF0C;&#x5BF9;&#x6253;&#x5206;&#x6027;&#x80FD;&#x7684;&#x63D0;&#x5347;&#x662F;&#x5F88;&#x6709;&#x5E2E;&#x52A9;&#x7684;&#x3002;</p><p>&#x6240;&#x4EE5;&#xFF0C;&#x4F7F;&#x7528;TFRecord&#x5C31;&#x5BF9;&#x4E86;&#xFF01;</p><a id="more"></a><h2>&#x6837;&#x4F8B;&#x6570;&#x636E;</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">valueA1</span>,2<span class="selector-class">.3</span>,<span class="selector-tag">valueC3</span><span class="selector-pseudo">:valueC2</span><span class="selector-pseudo">:valueC8</span>,3<span class="selector-pseudo">:4</span>,<span class="selector-tag">valueE3</span><span class="selector-pseudo">:valueE8</span><span class="selector-pseudo">:valueE3</span><span class="selector-pseudo">:valueE9</span>,4<span class="selector-class">.5</span><span class="selector-pseudo">:1.2</span><span class="selector-pseudo">:2.1</span>,<span class="selector-tag">valueG5</span><span class="selector-pseudo">:valueG9</span><span class="selector-id">#valueG3</span><span class="selector-pseudo">:valueG1</span><span class="selector-id">#valueG5</span><span class="selector-pseudo">:valueG3</span>,4<span class="selector-pseudo">:5</span><span class="selector-pseudo">:2</span><span class="selector-id">#1</span><span class="selector-pseudo">:2</span><span class="selector-pseudo">:3</span>,3<span class="selector-pseudo">:20</span><span class="selector-pseudo">:5</span><span class="selector-pseudo">:3</span>,1<span class="selector-pseudo">:0</span><span class="selector-pseudo">:2</span><span class="selector-pseudo">:2</span>,4<span class="selector-pseudo">:2</span><span class="selector-pseudo">:8</span><span class="selector-pseudo">:9</span>,<span class="selector-tag">valueI6</span><span class="selector-pseudo">:valueI9</span><span class="selector-pseudo">:valueI3</span><span class="selector-pseudo">:valueI6</span></span><br><span class="line"><span class="selector-tag">valueA2</span>,4<span class="selector-class">.1</span>,<span class="selector-tag">valueC1</span><span class="selector-pseudo">:valueC2</span><span class="selector-pseudo">:valueC3</span>,,<span class="selector-tag">valueE6</span><span class="selector-pseudo">:valueE1</span>,9<span class="selector-class">.4</span><span class="selector-pseudo">:6.6</span><span class="selector-pseudo">:8.3</span><span class="selector-pseudo">:7.2</span><span class="selector-pseudo">:9.1</span>,<span class="selector-tag">valueG2</span><span class="selector-pseudo">:valueG1</span><span class="selector-id">#valueG6</span><span class="selector-pseudo">:valueG6</span>,1<span class="selector-pseudo">:1</span><span class="selector-pseudo">:3</span><span class="selector-id">#4</span><span class="selector-pseudo">:2</span><span class="selector-pseudo">:9</span><span class="selector-id">#8</span><span class="selector-pseudo">:4</span><span class="selector-pseudo">:2</span>,5<span class="selector-pseudo">:10</span><span class="selector-pseudo">:2</span><span class="selector-pseudo">:2</span><span class="selector-pseudo">:6</span>,4<span class="selector-pseudo">:2</span><span class="selector-pseudo">:7</span><span class="selector-pseudo">:6</span><span class="selector-pseudo">:3</span>,3<span class="selector-pseudo">:1</span><span class="selector-pseudo">:8</span><span class="selector-pseudo">:4</span><span class="selector-pseudo">:2</span>,<span class="selector-tag">valueI3</span><span class="selector-pseudo">:valueI5</span><span class="selector-pseudo">:valueI2</span><span class="selector-pseudo">:valueI7</span><span class="selector-pseudo">:valueI5</span></span><br><span class="line"><span class="selector-tag">valueA1</span>,3<span class="selector-class">.7</span>,<span class="selector-tag">valueC5</span><span class="selector-pseudo">:valueC5</span><span class="selector-pseudo">:valueC5</span>,2<span class="selector-pseudo">:5</span>,<span class="selector-tag">valueE3</span><span class="selector-pseudo">:valueE3</span><span class="selector-pseudo">:valueE3</span>,5<span class="selector-class">.3</span>,,7<span class="selector-pseudo">:3</span><span class="selector-pseudo">:2</span><span class="selector-id">#6</span><span class="selector-pseudo">:4</span><span class="selector-pseudo">:6</span><span class="selector-id">#3</span><span class="selector-pseudo">:1</span><span class="selector-pseudo">:1</span><span class="selector-id">#8</span><span class="selector-pseudo">:9</span><span class="selector-pseudo">:8</span>,6<span class="selector-pseudo">:10</span>,2<span class="selector-pseudo">:7</span>,1<span class="selector-pseudo">:4</span>,<span class="selector-tag">valueI5</span><span class="selector-pseudo">:valueI5</span></span><br></pre></td></tr></table></figure><p>&#x9017;&#x53F7;&#xFF08;,&#xFF09;&#x5206;&#x5272;&#x4E86;&#x6BCF;&#x4E2A;&#x7279;&#x5F81;&#x5217;&#x3002;&#x4E95;&#x53F7;&#xFF08;#&#xFF09;&#x5206;&#x5272;&#x4E86;&#x6BCF;&#x4E2A;&#x7279;&#x5F81;&#x5185;&#x7684;&#x591A;&#x4E2A;&#x53D6;&#x503C;&#x3002;&#x5192;&#x53F7;&#xFF08;:&#xFF09;&#x5206;&#x5272;&#x4E86;&#x6BCF;&#x4E2A;&#x53D6;&#x503C;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x3002;<br>&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x7279;&#x5F81;&#x5217;&#x7684;&#x540D;&#x79F0;&#x4E3A;&#xFF1A;<br>[&#x201C;featureA&#x201D;, &#x201C;featureB&#x201D;, &#x201C;featureC&#x201D;, &#x201C;featureD&#x201D;, &#x201C;featureE&#x201D;, &#x201C;featureF&#x201D;, &#x201C;featureG&#x201D;,<br>&#x201C;featureH&#x201D;, &#x201C;featureI_Index0&#x201D;, &#x201C;featureI_Index1&#x201D;, &#x201C;featureI_Index2&#x201D;, &#x201C;featureI_value&#x201D;]</p><h2>Schema&#x5B9A;&#x4E49;</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">column_schema = {</span><br><span class="line">    <span class="comment"># featureA: &#x4E00;&#x7EF4;&#x5B57;&#x7B26;&#x4E32;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureA&quot;</span>: tf.io.FixedLenFeature(shape=(<span class="number">1</span>,), dtype=tf.string, default_value=<span class="string">&quot;null&quot;</span>),</span><br><span class="line">    <span class="comment"># featureB: &#x4E00;&#x7EF4;&#x6570;&#x503C;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureB&quot;</span>: tf.io.FixedLenFeature(shape=(<span class="number">1</span>,), dtype=tf.float32, default_value=<span class="number">0.0</span>),</span><br><span class="line">    <span class="comment"># featureC: &#x4E09;&#x7EF4;&#x5B57;&#x7B26;&#x4E32;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureC&quot;</span>: tf.io.FixedLenFeature(shape=(<span class="number">3</span>,), dtype=tf.string, default_value=[<span class="string">&quot;null&quot;</span>, <span class="string">&quot;null&quot;</span>, <span class="string">&quot;null&quot;</span>]),</span><br><span class="line">    <span class="comment"># featureD: &#x4E8C;&#x7EF4;&#x6570;&#x503C;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureD&quot;</span>: tf.io.FixedLenFeature(shape=(<span class="number">2</span>,), dtype=tf.int64, default_value=[<span class="number">0</span>, <span class="number">0</span>]),</span><br><span class="line">    <span class="comment"># featureE: &#x4E0D;&#x56FA;&#x5B9A;&#x7EF4;&#x5EA6;&#x5B57;&#x7B26;&#x4E32;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureE&quot;</span>: tf.io.VarLenFeature(dtype=tf.string),</span><br><span class="line">    <span class="comment"># featureF: &#x4E0D;&#x56FA;&#x5B9A;&#x7EF4;&#x5EA6;&#x6570;&#x503C;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureF&quot;</span>: tf.io.VarLenFeature(dtype=tf.float32),</span><br><span class="line">    <span class="comment"># featureG: &#x4E8C;&#x7EF4;&#x5B57;&#x7B26;&#x4E32;&#x5E8F;&#x5217;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureG&quot;</span>: tf.io.FixedLenSequenceFeature(shape=(<span class="number">2</span>,), dtype=tf.string, allow_missing=<span class="literal">True</span>, default_value=<span class="literal">None</span>),</span><br><span class="line">    <span class="comment"># featureH: &#x4E09;&#x7EF4;&#x6570;&#x503C;&#x5E8F;&#x5217;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureH&quot;</span>: tf.io.FixedLenSequenceFeature(shape=(<span class="number">3</span>,), dtype=tf.int64, allow_missing=<span class="literal">True</span>, default_value=<span class="literal">None</span>),</span><br><span class="line">    <span class="comment"># featureI: 21 * 4 * 10 &#x7EF4;&#x5B57;&#x7B26;&#x4E32;&#x7A00;&#x758F;&#x7279;&#x5F81;</span></span><br><span class="line">    <span class="string">&quot;featureI&quot;</span>: tf.io.SparseFeature(index_key=[<span class="string">&quot;featureI_Index0&quot;</span>, <span class="string">&quot;featureI_Index1&quot;</span>, <span class="string">&quot;featureI_Index2&quot;</span>],</span><br><span class="line">                                    value_key=<span class="string">&quot;featureI_value&quot;</span>, dtype=tf.string, size=[<span class="number">21</span>, <span class="number">4</span>, <span class="number">10</span>], already_sorted=<span class="literal">False</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure><blockquote><p>tf.io.FixedLenFeature</p></blockquote><p>&#x7528;&#x4E8E;&#x89E3;&#x6790;shape&#x548C;&#x7C7B;&#x578B;&#x786E;&#x5B9A;&#x7684;&#x7279;&#x5F81;&#x5217;&#x3002;&#x5728;&#x7279;&#x5F81;&#x5217;&#x7F3A;&#x5931;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;default_value&#x4E0D;&#x8BBE;&#x7F6E;&#x4F1A;&#x5F15;&#x53D1;&#x9519;&#x8BEF;&#x3002;default_value&#x7684;&#x503C;&#x9700;&#x8981;&#x548C;&#x8BBE;&#x7F6E;&#x7684;shape&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x3002;</p><blockquote><p>tf.io.VarLenFeature</p></blockquote><p>&#x7528;&#x4E8E;&#x89E3;&#x6790;&#x7C7B;&#x578B;&#x786E;&#x5B9A;&#xFF0C;&#x4F46;&#x662F;shape&#x4E0D;&#x786E;&#x5B9A;&#x7684;&#x7279;&#x5F81;&#x5217;&#x3002;</p><blockquote><p>tf.io.FixedLenSequenceFeature</p></blockquote><p>&#x7528;&#x4E8E;&#x89E3;&#x6790;shape&#x548C;&#x7C7B;&#x578B;&#x786E;&#x5B9A;&#x7684;&#x5E8F;&#x5217;&#x7279;&#x5F81;&#x5217;&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x5E8F;&#x5217;&#x7279;&#x5F81;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x50CF;&#x8FD9;&#x6837;&#xFF1A;[(1,2), (3,4), (5,6)]&#x3002;&#x5217;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x4E0D;&#x56FA;&#x5B9A;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;shape&#x56FA;&#x5B9A;&#x3002;</p><p>allow_missing=True&#x5141;&#x8BB8;&#x7279;&#x5F81;&#x503C;&#x4E0D;&#x5B58;&#x5728;&#x3002;&#x901A;&#x8FC7;default_value&#x6765;&#x6307;&#x5B9A;&#x586B;&#x5145;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</p><p>tf.io.parse_sequence_example&#x65B9;&#x6CD5;&#x8C8C;&#x4F3C;&#x8981;&#x6C42;default_value&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x4E3A;None</p><blockquote><p>tf.io.SparseFeature</p></blockquote><p>&#x7528;&#x4E8E;&#x89E3;&#x6790;&#x901A;&#x8FC7;&#x7A00;&#x758F;&#x77E9;&#x9635;&#x7684;&#x683C;&#x5F0F;&#x6765;&#x5B58;&#x50A8;&#x7684;&#x7279;&#x5F81;&#xFF0C;&#x5305;&#x62EC;index_key&#x548C;value_key&#x4E24;&#x90E8;&#x5206;&#x3002;&#x51E1;&#x662F;&#x7528;&#x5230;SparseFeature&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x90FD;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;VarLenFeature&#x6765;&#x66FF;&#x4EE3;&#x3002;</p><h2>TFRecord&#x6570;&#x636E;&#x8BFB;&#x5199;&#xFF08;java/scala&#x7248;&#xFF09;</h2><h3>&#x4F7F;&#x7528;tensorflow-utils&#x7EC4;&#x88C5;TFRecord&#x6570;&#x636E;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.tensorflow.example.Example;</span><br><span class="line"><span class="keyword">import</span> org.tensorflow.example.SequenceExample;</span><br><span class="line"><span class="keyword">import</span> top.ritchie.tensorflow.utils.feature.FeatureUtils;</span><br><span class="line"><span class="keyword">import</span> top.ritchie.tensorflow.utils.feature.TFRecordGen;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    git@github.com:ritchietop/tensorflow-utils.git</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleGen</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Example example = <span class="keyword">new</span> TFRecordGen(<span class="number">5</span>)</span><br><span class="line">                .put(<span class="string">&quot;featureA&quot;</span>, FeatureUtils.byteStringFeature(<span class="string">&quot;valueA1&quot;</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureB&quot;</span>, FeatureUtils.floatListFeature(<span class="number">2.3</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureC&quot;</span>, FeatureUtils.byteStringFeature(<span class="string">&quot;valueC3&quot;</span>, <span class="string">&quot;valueC2&quot;</span>, <span class="string">&quot;valueC8&quot;</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureD&quot;</span>, FeatureUtils.int64ListFeature(<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureE&quot;</span>, FeatureUtils.byteStringFeature(<span class="string">&quot;valueE3&quot;</span>, <span class="string">&quot;valueE8&quot;</span>, <span class="string">&quot;valueE3&quot;</span>, <span class="string">&quot;valueE9&quot;</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureF&quot;</span>, FeatureUtils.floatListFeature(<span class="number">4.5</span>, <span class="number">1.2</span>, <span class="number">2.1</span>))</span><br><span class="line">                .genExample();</span><br><span class="line">        SequenceExample sequenceExample = <span class="keyword">new</span> TFRecordGen(<span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">                .put(<span class="string">&quot;featureA&quot;</span>, FeatureUtils.byteStringFeature(<span class="string">&quot;valueA2&quot;</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureB&quot;</span>, FeatureUtils.floatListFeature(<span class="number">4.1</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureC&quot;</span>, FeatureUtils.byteStringFeature(<span class="string">&quot;valueC1&quot;</span>, <span class="string">&quot;valueC2&quot;</span>, <span class="string">&quot;valueC3&quot;</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureD&quot;</span>, FeatureUtils.int64ListFeature())</span><br><span class="line">                .put(<span class="string">&quot;featureE&quot;</span>, FeatureUtils.byteStringFeature(<span class="string">&quot;valueE6&quot;</span>, <span class="string">&quot;valueE1&quot;</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureF&quot;</span>, FeatureUtils.floatListFeature(<span class="number">9.4</span>, <span class="number">6.6</span>, <span class="number">8.3</span>, <span class="number">7.2</span>, <span class="number">9.1</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureG&quot;</span>, FeatureUtils.toFeatureList(</span><br><span class="line">                    FeatureUtils.byteStringFeature(<span class="string">&quot;valueG2&quot;</span>, <span class="string">&quot;valueG1&quot;</span>),</span><br><span class="line">                    FeatureUtils.byteStringFeature(<span class="string">&quot;valueG6&quot;</span>, <span class="string">&quot;valueG6&quot;</span>)</span><br><span class="line">                ))</span><br><span class="line">                .put(<span class="string">&quot;featureH&quot;</span>, FeatureUtils.toFeatureList(</span><br><span class="line">                    FeatureUtils.int64ListFeature(<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>),</span><br><span class="line">                    FeatureUtils.int64ListFeature(<span class="number">4</span>, <span class="number">2</span>, <span class="number">9</span>),</span><br><span class="line">                    FeatureUtils.int64ListFeature(<span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line">                ))</span><br><span class="line">                .put(<span class="string">&quot;featureI_Index0&quot;</span>, FeatureUtils.int64ListFeature(<span class="number">5</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">6</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureI_Index1&quot;</span>, FeatureUtils.int64ListFeature(<span class="number">4</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">3</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureI_Index2&quot;</span>, FeatureUtils.int64ListFeature(<span class="number">3</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>))</span><br><span class="line">                .put(<span class="string">&quot;featureI_value&quot;</span>, FeatureUtils.byteStringFeature(<span class="string">&quot;valueI3&quot;</span>, <span class="string">&quot;valueI5&quot;</span>, <span class="string">&quot;valueI2&quot;</span>, <span class="string">&quot;valueI7&quot;</span>, <span class="string">&quot;valueI5&quot;</span>))</span><br><span class="line">                .genSequenceExample();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3>&#x4F7F;&#x7528;Spark&#x5FEB;&#x901F;&#x8BFB;&#x5199;TFRecord&#x6570;&#x636E;</h3><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.{BytesWritable, NullWritable}</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.{SparkConf, SparkContext}</span><br><span class="line"><span class="keyword">import</span> org.tensorflow.spark.shaded.org.tensorflow.hadoop.io.{TFRecordFileInputFormat, TFRecordFileOutputFormat}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    &lt;dependency&gt;</span></span><br><span class="line"><span class="comment">        &lt;groupId&gt;org.tensorflow&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">        &lt;artifactId&gt;spark-tensorflow-connector_2.11&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">        &lt;version&gt;1.15.0&lt;/version&gt;</span></span><br><span class="line"><span class="comment">    &lt;/dependency&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">object ExampleGen {</span><br><span class="line"></span><br><span class="line">    def main(args: <span class="type">Array</span>[<span class="keyword">String</span>]): <span class="type">Unit </span>= {</span><br><span class="line">        val sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(<span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">&quot;ExampleGenTask&quot;</span>).setMaster(<span class="string">&quot;local&quot;</span>))</span><br><span class="line">        <span class="comment">// TFRecord&#x5199;&#x5165;</span></span><br><span class="line">        sc.makeRDD(Seq(example, sequenceExample)).repartition(<span class="number">1</span>)</span><br><span class="line">        .map(example =&gt; (<span class="keyword">new</span> <span class="type">BytesWritable</span>(example.toByteArray), NullWritable.<span class="keyword">get</span>()))</span><br><span class="line">        .saveAsNewAPIHadoopFile[TFRecordFileOutputFormat](<span class="string">&quot;path/data&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TFRecord&#x8BFB;&#x53D6;</span></span><br><span class="line">        sc.<span class="keyword">new</span><span class="type">APIHadoopFile</span>(<span class="string">&quot;path/data&quot;</span>, classOf[TFRecordFileInputFormat], classOf[BytesWritable], classOf[NullWritable])</span><br><span class="line">        .map { <span class="keyword">case</span> (bytesWritable, nullWritable) =&gt; SequenceExample.parseFrom(bytesWritable.getBytes) }</span><br><span class="line">        .collect()</span><br><span class="line">        .foreach(println)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2>TFRecord&#x6570;&#x636E;&#x8BFB;&#x5199;&#xFF08;python&#x7248;&#xFF09;</h2><h3>TFRecord&#x5199;&#x5165;&#x6837;&#x4F8B;</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">writer = tf.io.TFRecordWriter(<span class="string">&quot;path/tfrecord&quot;</span>)</span><br><span class="line"></span><br><span class="line">example = tf.train.Example(features=tf.train.Features(feature={</span><br><span class="line">    <span class="string">&quot;featureA&quot;</span>: tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">u&quot;valueA1&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>)])),</span><br><span class="line">    <span class="string">&quot;featureB&quot;</span>: tf.train.Feature(float_list=tf.train.FloatList(value=[<span class="number">2.3</span>])),</span><br><span class="line">    <span class="string">&quot;featureC&quot;</span>: tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">b&quot;valueC3&quot;</span>, <span class="string">b&quot;valueC2&quot;</span>, <span class="string">b&quot;valueC8&quot;</span>])),</span><br><span class="line">    <span class="string">&quot;featureD&quot;</span>: tf.train.Feature(int64_list=tf.train.Int64List(value=[<span class="number">3</span>, <span class="number">4</span>])),</span><br><span class="line">    <span class="string">&quot;featureE&quot;</span>: tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">b&quot;valueE3&quot;</span>, <span class="string">b&quot;valueE8&quot;</span>, <span class="string">b&quot;valueE3&quot;</span>, <span class="string">b&quot;valueE9&quot;</span>])),</span><br><span class="line">    <span class="string">&quot;featureF&quot;</span>: tf.train.Feature(float_list=tf.train.FloatList(value=[<span class="number">4.5</span>, <span class="number">1.2</span>, <span class="number">2.1</span>]))</span><br><span class="line">}))</span><br><span class="line"></span><br><span class="line">sequence_example = tf.train.SequenceExample(</span><br><span class="line">    context=tf.train.Features(feature={</span><br><span class="line">        <span class="string">&quot;featureA&quot;</span>: tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">b&quot;valueA2&quot;</span>])),</span><br><span class="line">        <span class="string">&quot;featureB&quot;</span>: tf.train.Feature(float_list=tf.train.FloatList(value=[<span class="number">4.1</span>])),</span><br><span class="line">        <span class="string">&quot;featureC&quot;</span>: tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">b&quot;valueC1&quot;</span>, <span class="string">b&quot;valueC2&quot;</span>, <span class="string">b&quot;valueC3&quot;</span>])),</span><br><span class="line">        <span class="string">&quot;featureE&quot;</span>: tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">b&quot;valueE6&quot;</span>, <span class="string">b&quot;valueE1&quot;</span>])),</span><br><span class="line">        <span class="string">&quot;featureF&quot;</span>: tf.train.Feature(float_list=tf.train.FloatList(value=[<span class="number">9.4</span>, <span class="number">6.6</span>, <span class="number">8.3</span>, <span class="number">7.2</span>, <span class="number">9.1</span>])),</span><br><span class="line">        <span class="string">&quot;featureI_Index0&quot;</span>: tf.train.Feature(int64_list=tf.train.Int64List(value=[<span class="number">5</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">6</span>])),</span><br><span class="line">        <span class="string">&quot;featureI_Index1&quot;</span>: tf.train.Feature(int64_list=tf.train.Int64List(value=[<span class="number">4</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">3</span>])),</span><br><span class="line">        <span class="string">&quot;featureI_Index2&quot;</span>: tf.train.Feature(int64_list=tf.train.Int64List(value=[<span class="number">3</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>])),</span><br><span class="line">        <span class="string">&quot;featureI_value&quot;</span>: tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">b&quot;valueI3&quot;</span>, <span class="string">b&quot;valueI5&quot;</span>, <span class="string">b&quot;valueI2&quot;</span>, <span class="string">b&quot;valueI7&quot;</span>, <span class="string">b&quot;valueI5&quot;</span>]))</span><br><span class="line">    }),</span><br><span class="line">    feature_lists=tf.train.FeatureLists(feature_list={</span><br><span class="line">        <span class="string">&quot;featureG&quot;</span>: tf.train.FeatureList(feature=[</span><br><span class="line">            tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">b&quot;valueG2&quot;</span>, <span class="string">b&quot;valueG1&quot;</span>])),</span><br><span class="line">            tf.train.Feature(bytes_list=tf.train.BytesList(value=[<span class="string">b&quot;valueG6&quot;</span>, <span class="string">u&quot;valueG6&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>)]))</span><br><span class="line">        ]),</span><br><span class="line">        <span class="string">&quot;featureH&quot;</span>: tf.train.FeatureList(feature=[</span><br><span class="line">            tf.train.Feature(int64_list=tf.train.Int64List(value=[<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>])),</span><br><span class="line">            tf.train.Feature(int64_list=tf.train.Int64List(value=[<span class="number">4</span>, <span class="number">2</span>, <span class="number">9</span>])),</span><br><span class="line">            tf.train.Feature(int64_list=tf.train.Int64List(value=[<span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>]))</span><br><span class="line">        ])</span><br><span class="line">    })</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">writer.write(example.SerializeToString())</span><br><span class="line">writer.write(sequence_example.SerializeToString())</span><br><span class="line"></span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure><h3>TFRecord&#x89E3;&#x6790;</h3><p>&#x4F7F;&#x7528;tf.io.parse_single_sequence_example&#x89E3;&#x6790;SequenceExample&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4E0D;&#x652F;&#x6301;tf.io.SparseFeature&#x7279;&#x5F81;&#x5217;&#xFF0C;&#x6240;&#x4EE5;&#x89E3;&#x6790;&#x7684;&#x65F6;&#x5019;&#x628A;featureI&#x5254;&#x9664;&#x4E86;&#x3002;</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">context_schema = {</span><br><span class="line">    <span class="string">&quot;featureA&quot;</span>: column_schema[<span class="string">&quot;featureA&quot;</span>],</span><br><span class="line">    <span class="string">&quot;featureB&quot;</span>: column_schema[<span class="string">&quot;featureB&quot;</span>],</span><br><span class="line">    <span class="string">&quot;featureC&quot;</span>: column_schema[<span class="string">&quot;featureC&quot;</span>],</span><br><span class="line">    <span class="string">&quot;featureD&quot;</span>: column_schema[<span class="string">&quot;featureD&quot;</span>],</span><br><span class="line">    <span class="string">&quot;featureE&quot;</span>: column_schema[<span class="string">&quot;featureE&quot;</span>],</span><br><span class="line">    <span class="string">&quot;featureF&quot;</span>: column_schema[<span class="string">&quot;featureF&quot;</span>],</span><br><span class="line">    <span class="string">&quot;featureI&quot;</span>: column_schema[<span class="string">&quot;featureI&quot;</span>],</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">sequence_schema = {</span><br><span class="line">    <span class="string">&quot;featureG&quot;</span>: column_schema[<span class="string">&quot;featureG&quot;</span>],</span><br><span class="line">    <span class="string">&quot;featureH&quot;</span>: column_schema[<span class="string">&quot;featureH&quot;</span>],</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x8FD9;&#x4E2A;&#x662F;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x9AD8;&#x6548;&#x52A0;&#x8F7D;&#x5916;&#x90E8;&#x6570;&#x636E;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x5177;&#x4F53;&#x4F7F;&#x7528;&#x53EF;&#x4EE5;&#x53C2;&#x52A0;tensorflow dataset</span></span><br><span class="line">data = tf.data.TFRecordDataset(filenames=<span class="string">&quot;path/tfrecord&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index, record <span class="keyword">in</span> enumerate(data):</span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span>:</span><br><span class="line">        example = tf.io.parse_single_example(record, features=context_schema)</span><br><span class="line">        print(<span class="string">&quot;======================example======================&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> example.items():</span><br><span class="line">            print(key, <span class="string">&quot;=&gt;&quot;</span>, value)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># &#x5254;&#x9664;SparseFeature&#x7279;&#x5F81;</span></span><br><span class="line">        context_schema.pop(<span class="string">&quot;featureI&quot;</span>)</span><br><span class="line">        <span class="comment"># &#x8FD9;&#x91CC;&#x8FD4;&#x56DE;&#x4E24;&#x4E2A;dict&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;contextFeatures&#x548C;sequenceFeature</span></span><br><span class="line">        (context, sequence) = tf.io.parse_single_sequence_example(</span><br><span class="line">            record, context_features=context_schema, sequence_features=sequence_schema)</span><br><span class="line">        print(<span class="string">&quot;==============sequenceExample: context==============&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> context.items():</span><br><span class="line">            print(key, <span class="string">&quot;=&gt;&quot;</span>, value)</span><br><span class="line">        print(<span class="string">&quot;==============sequenceExample: featureList==============&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> sequence.items():</span><br><span class="line">            print(key, <span class="string">&quot;=&gt;&quot;</span>, value)</span><br></pre></td></tr></table></figure><p>&#x4E0A;&#x9762;&#x7684;&#x7A0B;&#x5E8F;&#x89E3;&#x6790;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">======================<span class="attribute">example</span>======================</span><br><span class="line">featureA =&gt; tf.Tensor([b<span class="string">&apos;valueA1&apos;</span>], shape=(1,), <span class="attribute">dtype</span>=string)</span><br><span class="line">featureB =&gt; tf.Tensor([2.3], shape=(1,), <span class="attribute">dtype</span>=float32)</span><br><span class="line">featureC =&gt; tf.Tensor([b<span class="string">&apos;valueC3&apos;</span> b<span class="string">&apos;valueC2&apos;</span> b<span class="string">&apos;valueC8&apos;</span>], shape=(3,), <span class="attribute">dtype</span>=string)</span><br><span class="line">featureD =&gt; tf.Tensor([3 4], shape=(2,), <span class="attribute">dtype</span>=int64)</span><br><span class="line">featureE =&gt; SparseTensor(<span class="attribute">indices</span>=tf.Tensor(</span><br><span class="line">[[0]</span><br><span class="line"> [1]</span><br><span class="line"> [2]</span><br><span class="line"> [3]], shape=(4, 1), <span class="attribute">dtype</span>=int64), <span class="attribute">values</span>=tf.Tensor([b<span class="string">&apos;valueE3&apos;</span> b<span class="string">&apos;valueE8&apos;</span> b<span class="string">&apos;valueE3&apos;</span> b<span class="string">&apos;valueE9&apos;</span>], shape=(4,), <span class="attribute">dtype</span>=string), <span class="attribute">dense_shape</span>=tf.Tensor([4], shape=(1,), <span class="attribute">dtype</span>=int64))</span><br><span class="line">featureF =&gt; SparseTensor(<span class="attribute">indices</span>=tf.Tensor(</span><br><span class="line">[[0]</span><br><span class="line"> [1]</span><br><span class="line"> [2]], shape=(3, 1), <span class="attribute">dtype</span>=int64), <span class="attribute">values</span>=tf.Tensor([4.5 1.2 2.1], shape=(3,), <span class="attribute">dtype</span>=float32), <span class="attribute">dense_shape</span>=tf.Tensor([3], shape=(1,), <span class="attribute">dtype</span>=int64))</span><br><span class="line">featureI =&gt; SparseTensor(<span class="attribute">indices</span>=tf.Tensor([], shape=(0, 3), <span class="attribute">dtype</span>=int64), <span class="attribute">values</span>=tf.Tensor([], shape=(0,), <span class="attribute">dtype</span>=string), <span class="attribute">dense_shape</span>=tf.Tensor([21  4 10], shape=(3,), <span class="attribute">dtype</span>=int64))</span><br><span class="line">==============sequenceExample: <span class="attribute">context</span>==============</span><br><span class="line">featureA =&gt; tf.Tensor([b<span class="string">&apos;valueA2&apos;</span>], shape=(1,), <span class="attribute">dtype</span>=string)</span><br><span class="line">featureB =&gt; tf.Tensor([4.1], shape=(1,), <span class="attribute">dtype</span>=float32)</span><br><span class="line">featureC =&gt; tf.Tensor([b<span class="string">&apos;valueC1&apos;</span> b<span class="string">&apos;valueC2&apos;</span> b<span class="string">&apos;valueC3&apos;</span>], shape=(3,), <span class="attribute">dtype</span>=string)</span><br><span class="line">featureD =&gt; tf.Tensor([0 0], shape=(2,), <span class="attribute">dtype</span>=int64)</span><br><span class="line">featureE =&gt; SparseTensor(<span class="attribute">indices</span>=tf.Tensor(</span><br><span class="line">[[0]</span><br><span class="line"> [1]], shape=(2, 1), <span class="attribute">dtype</span>=int64), <span class="attribute">values</span>=tf.Tensor([b<span class="string">&apos;valueE6&apos;</span> b<span class="string">&apos;valueE1&apos;</span>], shape=(2,), <span class="attribute">dtype</span>=string), <span class="attribute">dense_shape</span>=tf.Tensor([2], shape=(1,), <span class="attribute">dtype</span>=int64))</span><br><span class="line">featureF =&gt; SparseTensor(<span class="attribute">indices</span>=tf.Tensor(</span><br><span class="line">[[0]</span><br><span class="line"> [1]</span><br><span class="line"> [2]</span><br><span class="line"> [3]</span><br><span class="line"> [4]], shape=(5, 1), <span class="attribute">dtype</span>=int64), <span class="attribute">values</span>=tf.Tensor([9.4 6.6 8.3 7.2 9.1], shape=(5,), <span class="attribute">dtype</span>=float32), <span class="attribute">dense_shape</span>=tf.Tensor([5], shape=(1,), <span class="attribute">dtype</span>=int64))</span><br><span class="line">==============sequenceExample: <span class="attribute">featureList</span>==============</span><br><span class="line">featureG =&gt; tf.Tensor(</span><br><span class="line">[[b<span class="string">&apos;valueG2&apos;</span> b<span class="string">&apos;valueG1&apos;</span>]</span><br><span class="line"> [b<span class="string">&apos;valueG6&apos;</span> b<span class="string">&apos;valueG6&apos;</span>]], shape=(2, 2), <span class="attribute">dtype</span>=string)</span><br><span class="line">featureH =&gt; tf.Tensor(</span><br><span class="line">[[1 1 3]</span><br><span class="line"> [4 2 9]</span><br><span class="line"> [8 4 2]], shape=(3, 3), <span class="attribute">dtype</span>=int64)</span><br></pre></td></tr></table></figure><h4>Example&#x89E3;&#x6790;API</h4><blockquote><p>tf.io.parse_single_example(serialized, features)</p></blockquote><blockquote><p>tf.io.parse_example(serialized, features)</p></blockquote><blockquote><p>tf.io.parse_single_sequence_example(serialized, context_features=None, sequence_features=None)</p></blockquote><blockquote><p>tf.io.parse_sequence_example(serialized, context_features=None, sequence_features=None)</p></blockquote><p>single&#x7248;&#x89E3;&#x6790;&#x5355;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x975E;single&#x7248;&#x9700;&#x8981;&#x52A0;&#x4E00;&#x4E2A;batch&#x7EF4;&#x5EA6;&#x3002;&#x5176;&#x4F59;&#x65B9;&#x9762;&#x4E24;&#x8005;&#x7528;&#x6CD5;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x3002;</p>]]></content>
      
      
      <categories>
          
          <category> tensorflow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tensorflow tfrecord sequenceExample spark feature </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【tensorflow】TFRecord数据结构</title>
      <link href="/2019/12/24/tensorflow-tfrecord-basic_datastruct/"/>
      <url>/2019/12/24/tensorflow-tfrecord-basic_datastruct/</url>
      
        <content type="html"><![CDATA[<p>TFRecord&#x662F;&#x5B98;&#x65B9;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x7684;tensorflow&#x6A21;&#x578B;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;&#x57FA;&#x4E8E;&#x8BE5;&#x683C;&#x5F0F;&#x7684;&#x6A21;&#x578B;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8F83;&#x5C0F;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x643A;&#x5E26;&#x3002;<br>&#x8FD9;&#x91CC;&#x4F7F;&#x7528;java&#x7684;API&#xFF0C;&#x5BF9;TFRecord&#x4E2D;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;BytesList&#x3001;FloatList&#x3001;Int64List&#x3001;Feature&#x3001;Features&#x3001;Example&#x3001;FeatureList&#x3001;FeatureLists&#x3001;SequenceExample&#x8FDB;&#x884C;&#x8BF4;&#x660E;&#x3002;</p><a id="more"></a><h2>&#x5173;&#x952E;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;proto&#x5B9A;&#x4E49;</h2><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">BytesList</span> </span>{ <span class="keyword">repeated</span> <span class="built_in">bytes</span> value = <span class="number">1</span>; }</span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">FloatList</span> </span>{ <span class="keyword">repeated</span> <span class="built_in">float</span> value = <span class="number">1</span> [packed = <span class="literal">true</span>]; }</span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">Int64List</span> </span>{ <span class="keyword">repeated</span> <span class="built_in">int64</span> value = <span class="number">1</span> [packed = <span class="literal">true</span>]; }</span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">Feature</span> </span>{</span><br><span class="line">    <span class="keyword">oneof</span> kind {</span><br><span class="line">        BytesList bytes_list = <span class="number">1</span>;</span><br><span class="line">        FloatList float_list = <span class="number">2</span>;</span><br><span class="line">        Int64List int64_list = <span class="number">3</span>;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">Features</span> </span>{ map&lt;<span class="built_in">string</span>, Feature&gt; feature = <span class="number">1</span>; };</span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">Example</span> </span>{ Features features = <span class="number">1</span>; };</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">FeatureList</span> </span>{ <span class="keyword">repeated</span> Feature feature = <span class="number">1</span>; };</span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">FeatureLists</span> </span>{ map&lt;<span class="built_in">string</span>, FeatureList&gt; feature_list = <span class="number">1</span>; };</span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">SequenceExample</span> </span>{</span><br><span class="line">  Features context = <span class="number">1</span>;</span><br><span class="line">  FeatureLists feature_lists = <span class="number">2</span>;</span><br><span class="line">};</span><br></pre></td></tr></table></figure><h2>java&#x4EE3;&#x7801;&#x4E2D;&#x9700;&#x8981;&#x5F15;&#x5165;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">com</span><span class="selector-class">.google</span><span class="selector-class">.protobuf</span><span class="selector-class">.ByteString</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.BytesList</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.FloatList</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.Int64List</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.Feature</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.Features</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.FeatureList</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.FeatureLists</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.Example</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.tensorflow</span><span class="selector-class">.example</span><span class="selector-class">.SequenceExample</span>;</span><br></pre></td></tr></table></figure><p>&#x4F9D;&#x8D56;&#x5305;&#x914D;&#x7F6E;</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.tensorflow<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>proto<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">{tensorflow.version}</span><span class="xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2>BytesList, FloatList, Int64List</h2><p>&#x8FD9;&#x4E09;&#x79CD;&#x7C7B;&#x578B;&#x662F;TFRecord&#x7684;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x5185;&#x90E8;&#x5305;&#x88C5;&#x7684;&#x662F;&#x4E09;&#x79CD;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x5217;&#x8868;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x5185;&#x90E8;&#x5305;&#x88C5;&#x7C7B;&#x578B;&#x8FDB;&#x884C;&#x7684;&#x3002;</p><p>BytesList&#x662F;&#x5BF9;List<bytestring>&#x7C7B;&#x578B;&#x7684;&#x5305;&#x88C5;</bytestring></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BytesList.Builder </span><span class="keyword">bytesListBuilder </span>= <span class="keyword">BytesList.newBuilder();</span></span><br><span class="line"><span class="keyword">BytesList </span><span class="keyword">bytesList </span>= <span class="keyword">bytesListBuilder</span></span><br><span class="line"><span class="keyword"> </span>       .<span class="keyword">addValue(ByteString.copyFromUtf8(&quot;A&quot;))</span></span><br><span class="line"><span class="keyword"> </span>       .<span class="keyword">addValue(ByteString.copyFromUtf8(&quot;B&quot;))</span></span><br><span class="line"><span class="keyword"> </span>       .setValue(<span class="number">0</span>, <span class="keyword">ByteString.copyFromUtf8(&quot;C&quot;))</span></span><br><span class="line"><span class="keyword"> </span>       .<span class="keyword">addValue(ByteString.copyFromUtf8(&quot;D&quot;))</span></span><br><span class="line"><span class="keyword"> </span>       .<span class="keyword">build();</span></span><br><span class="line"><span class="keyword">System.out.println(bytesList);</span></span><br><span class="line"><span class="keyword">===========output===========</span></span><br><span class="line"><span class="keyword">value: </span><span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="symbol">value</span>: <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="symbol">value</span>: <span class="string">&quot;D&quot;</span></span><br><span class="line">============================</span><br></pre></td></tr></table></figure><p>FloatList&#x662F;&#x5BF9;List<float32>&#x7C7B;&#x578B;&#x7684;&#x5305;&#x88C5;</float32></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">FloatList.Builder floatListBuilder = FloatList.newBuilder();</span><br><span class="line">FloatList floatList = floatListBuilder</span><br><span class="line"><span class="code">        .addValue(1F).addValue(2F).addValue(3F)</span></span><br><span class="line"><span class="code">        .mergeFrom(FloatList.newBuilder().addValue(4F).addValue(5F).build())</span></span><br><span class="line"><span class="code">        .build();</span></span><br><span class="line">System.out.println(floatList);</span><br><span class="line">===========output===========</span><br><span class="line">value: 1.0</span><br><span class="line">value: 2.0</span><br><span class="line">value: 3.0</span><br><span class="line">value: 4.0</span><br><span class="line">value: 5.0</span><br><span class="line">============================</span><br></pre></td></tr></table></figure><p>Int64List&#x662F;&#x5BF9;List<int64>&#x7C7B;&#x578B;&#x7684;&#x5305;&#x88C5;</int64></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Int64List.Builder int64ListBuilder = Int64List.newBuilder();</span><br><span class="line">Int64List int64List = int64ListBuilder</span><br><span class="line"><span class="code">        .addAllValue(Arrays.asList(1L, 2L, 3L, 4L))</span></span><br><span class="line"><span class="code">        .build();</span></span><br><span class="line">System.out.println(int64List);</span><br><span class="line">===========output===========</span><br><span class="line">value: 1</span><br><span class="line">value: 2</span><br><span class="line">value: 3</span><br><span class="line">value: 4</span><br><span class="line">============================</span><br></pre></td></tr></table></figure><h2>Feature, FeatureList</h2><p>Feature&#x662F;&#x5BF9;BytesList&#xFF0C;Int64List&#xFF0C;FloatList&#x4E09;&#x79CD;&#x7C7B;&#x578B;&#x4E2D;&#x7684;&#x4E00;&#x79CD;&#x8FDB;&#x884C;&#x4E86;&#x5305;&#x88C5;&#x3002;&#x901A;&#x8FC7;Feature&#x7684;&#x5305;&#x88C5;&#xFF0C;&#x9690;&#x85CF;&#x4E86;&#x4E0D;&#x540C;&#x7279;&#x5F81;&#x5217;&#x7684;&#x7C7B;&#x578B;&#x5DEE;&#x5F02;&#x3002;</p><p>FeatureList&#x662F;&#x5BF9;List<feature>&#x7684;&#x5305;&#x88C5;&#x3002;&#x6BCF;&#x4E2A;Feature&#x5305;&#x88C5;&#x7684;list&#xFF08;bytesList, Int64List, FloatList&#xFF09;&#x957F;&#x5EA6;&#x53EF;&#x4EE5;&#x4E0D;&#x540C;&#x3002;</feature></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">feature&#x4E2D;&#x53EA;&#x80FD;&#x5305;&#x542B;&#x4E00;&#x79CD;list&#xFF0C;&#x591A;&#x6B21;&#x8D4B;&#x503C;&#x4F1A;&#x88AB;&#x8986;&#x76D6;</span></span><br><span class="line"><span class="string">Feature.Builder</span> <span class="string">featureBuilder</span> <span class="string">=</span> <span class="string">Feature.newBuilder();</span></span><br><span class="line"><span class="string">Feature</span> <span class="string">feature</span> <span class="string">=</span> <span class="string">featureBuilder</span></span><br><span class="line">        <span class="string">.setBytesList(bytesList)</span></span><br><span class="line">        <span class="string">.setInt64List(int64List)</span></span><br><span class="line">        <span class="string">.setFloatList(floatList)</span></span><br><span class="line">        <span class="string">.build();</span></span><br><span class="line"><span class="string">System.out.println(feature);</span></span><br><span class="line"><span class="string">===========output===========</span></span><br><span class="line"><span class="string">float_list</span> <span class="string">{</span></span><br><span class="line">  <span class="attr">value:</span> <span class="number">1.0</span></span><br><span class="line">  <span class="attr">value:</span> <span class="number">2.0</span></span><br><span class="line">  <span class="attr">value:</span> <span class="number">3.0</span></span><br><span class="line">  <span class="attr">value:</span> <span class="number">4.0</span></span><br><span class="line">  <span class="attr">value:</span> <span class="number">5.0</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">============================</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">FeatureList.Builder</span> <span class="string">featureListBuilder</span> <span class="string">=</span> <span class="string">FeatureList.newBuilder();</span></span><br><span class="line"><span class="string">FeatureList</span> <span class="string">featureList</span> <span class="string">=</span> <span class="string">featureListBuilder</span></span><br><span class="line">        <span class="string">.addFeature(feature)</span></span><br><span class="line">        <span class="string">.addFeature(Feature.newBuilder().setInt64List(int64List).build())</span></span><br><span class="line">        <span class="string">.build();</span></span><br><span class="line"><span class="string">System.out.println(featureList);</span></span><br><span class="line"><span class="string">===========output===========</span></span><br><span class="line"><span class="string">feature</span> <span class="string">{</span></span><br><span class="line">  <span class="string">float_list</span> <span class="string">{</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">1.0</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">2.0</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">3.0</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">4.0</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">5.0</span></span><br><span class="line">  <span class="string">}</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">feature</span> <span class="string">{</span></span><br><span class="line">  <span class="string">int64_list</span> <span class="string">{</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">3</span></span><br><span class="line">    <span class="attr">value:</span> <span class="number">4</span></span><br><span class="line">  <span class="string">}</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">============================</span></span><br></pre></td></tr></table></figure><h2>Features, FeatureLists</h2><p>Features&#x662F;&#x5BF9;Map&lt;String, Feature&gt;&#x7684;&#x5305;&#x88C5;&#x3002;</p><p>FeatureLists&#x662F;&#x5BF9;Map&lt;String, FeatureList&gt;&#x7684;&#x5305;&#x88C5;&#x3002;</p><p>&#x4E0D;&#x540C;&#x7684;key&#x5BF9;&#x5E94;&#x7684;&#x4E0D;&#x540C;&#x7684;&#x7279;&#x5F81;&#x540D;&#x79F0;&#x3002;</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Feature.Builder bytesFeatureBuilder = Feature.newBuilder();</span><br><span class="line">Feature bytesFeature = bytesFeatureBuilder.setBytesList(bytesList).build();</span><br><span class="line">Feature.Builder floatFeatureBuilder = Feature.newBuilder();</span><br><span class="line">Feature floatFeature = floatFeatureBuilder.setFloatList(floatList).build();</span><br><span class="line">Features.Builder featuresBuilder = Features.newBuilder();</span><br><span class="line">Features features = featuresBuilder</span><br><span class="line">        .putFeature(<span class="string">&quot;bytesFeatureKey&quot;</span>, bytesFeature)</span><br><span class="line">        .putFeature(<span class="string">&quot;floatFeatureKey&quot;</span>, floatFeature)</span><br><span class="line">        .putFeature(<span class="string">&quot;emptyFeatureKey&quot;</span>, Feature.newBuilder().build())</span><br><span class="line">        .build();</span><br><span class="line">System.out.println(features);</span><br><span class="line">===========output===========</span><br><span class="line"><span class="class">feature </span>{</span><br><span class="line"><span class="symbol">  key:</span> <span class="string">&quot;bytesFeatureKey&quot;</span></span><br><span class="line">  <span class="class">value </span>{</span><br><span class="line">    <span class="class">bytes_list </span>{</span><br><span class="line"><span class="symbol">      value:</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="symbol">      value:</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="symbol">      value:</span> <span class="string">&quot;D&quot;</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="class">feature </span>{</span><br><span class="line"><span class="symbol">  key:</span> <span class="string">&quot;floatFeatureKey&quot;</span></span><br><span class="line">  <span class="class">value </span>{</span><br><span class="line">    <span class="class">float_list </span>{</span><br><span class="line"><span class="symbol">      value:</span> <span class="number">1.0</span></span><br><span class="line"><span class="symbol">      value:</span> <span class="number">2.0</span></span><br><span class="line"><span class="symbol">      value:</span> <span class="number">3.0</span></span><br><span class="line"><span class="symbol">      value:</span> <span class="number">4.0</span></span><br><span class="line"><span class="symbol">      value:</span> <span class="number">5.0</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="class">feature </span>{</span><br><span class="line"><span class="symbol">  key:</span> <span class="string">&quot;emptyFeatureKey&quot;</span></span><br><span class="line">  <span class="class">value </span>{</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">============================</span><br></pre></td></tr></table></figure><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">FeatureLists.Builder featureListsBuilder = FeatureLists.newBuilder();</span><br><span class="line">FeatureLists featureLists = featureListsBuilder</span><br><span class="line">        .putAllFeatureList(new HashMap<span class="params">&lt;String, FeatureList&gt;</span>() {{</span><br><span class="line">            put(<span class="string">&quot;featureListKey&quot;</span>, featureList);</span><br><span class="line">            put(<span class="string">&quot;emptyFeatureListKey&quot;</span>, FeatureList.newBuilder().build());</span><br><span class="line">        }})</span><br><span class="line">        .build();</span><br><span class="line">System.out.println(featureLists);</span><br><span class="line">===========output===========</span><br><span class="line"><span class="class">feature_list </span>{</span><br><span class="line"><span class="symbol">  key:</span> <span class="string">&quot;featureListKey&quot;</span></span><br><span class="line">  <span class="class">value </span>{</span><br><span class="line">    <span class="class">feature </span>{</span><br><span class="line">      <span class="class">float_list </span>{</span><br><span class="line"><span class="symbol">        value:</span> <span class="number">1.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">2.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">3.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">4.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">5.0</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    <span class="class">feature </span>{</span><br><span class="line">      <span class="class">int64_list </span>{</span><br><span class="line"><span class="symbol">        value:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">3</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">4</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="class">feature_list </span>{</span><br><span class="line"><span class="symbol">  key:</span> <span class="string">&quot;emptyFeatureListKey&quot;</span></span><br><span class="line">  <span class="class">value </span>{</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">============================</span><br></pre></td></tr></table></figure><h2>Example, SequenceExample</h2><p>Example&#x548C;SequenceExample&#x662F;TFRecord&#x6700;&#x7EC8;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x4E24;&#x79CD;&#x683C;&#x5F0F;&#x3002;</p><p>Example&#x662F;&#x5BF9;Features&#x7684;&#x5305;&#x88C5;&#x3002;</p><p>SequenceExample&#x662F;&#x5BF9;Features&#x548C;FeatureLists&#x7684;&#x5305;&#x88C5;&#x3002;</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Example.Builder exampleBuilder = Example.newBuilder();</span><br><span class="line">Example example = exampleBuilder</span><br><span class="line">        .setFeatures(features)</span><br><span class="line">        .build();</span><br><span class="line">System.out.println(example);</span><br><span class="line">===========output===========</span><br><span class="line"><span class="class">features </span>{</span><br><span class="line">  <span class="class">feature </span>{</span><br><span class="line"><span class="symbol">    key:</span> <span class="string">&quot;bytesFeatureKey&quot;</span></span><br><span class="line">    <span class="class">value </span>{</span><br><span class="line">      <span class="class">bytes_list </span>{</span><br><span class="line"><span class="symbol">        value:</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="string">&quot;D&quot;</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="class">feature </span>{</span><br><span class="line"><span class="symbol">    key:</span> <span class="string">&quot;floatFeatureKey&quot;</span></span><br><span class="line">    <span class="class">value </span>{</span><br><span class="line">      <span class="class">float_list </span>{</span><br><span class="line"><span class="symbol">        value:</span> <span class="number">1.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">2.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">3.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">4.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">5.0</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="class">feature </span>{</span><br><span class="line"><span class="symbol">    key:</span> <span class="string">&quot;emptyFeatureKey&quot;</span></span><br><span class="line">    <span class="class">value </span>{</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">============================</span><br></pre></td></tr></table></figure><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">SequenceExample.Builder sequenceExampleBuilder = SequenceExample.newBuilder();</span><br><span class="line">SequenceExample sequenceExample = sequenceExampleBuilder</span><br><span class="line">        .setContext(features)</span><br><span class="line">        .setFeatureLists(featureLists)</span><br><span class="line">        .build();</span><br><span class="line">System.out.println(sequenceExample);</span><br><span class="line">===========output===========</span><br><span class="line"><span class="class">context </span>{</span><br><span class="line">  <span class="class">feature </span>{</span><br><span class="line"><span class="symbol">    key:</span> <span class="string">&quot;bytesFeatureKey&quot;</span></span><br><span class="line">    <span class="class">value </span>{</span><br><span class="line">      <span class="class">bytes_list </span>{</span><br><span class="line"><span class="symbol">        value:</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="string">&quot;D&quot;</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="class">feature </span>{</span><br><span class="line"><span class="symbol">    key:</span> <span class="string">&quot;floatFeatureKey&quot;</span></span><br><span class="line">    <span class="class">value </span>{</span><br><span class="line">      <span class="class">float_list </span>{</span><br><span class="line"><span class="symbol">        value:</span> <span class="number">1.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">2.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">3.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">4.0</span></span><br><span class="line"><span class="symbol">        value:</span> <span class="number">5.0</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="class">feature </span>{</span><br><span class="line"><span class="symbol">    key:</span> <span class="string">&quot;emptyFeatureKey&quot;</span></span><br><span class="line">    <span class="class">value </span>{</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="class">feature_lists </span>{</span><br><span class="line">  <span class="class">feature_list </span>{</span><br><span class="line"><span class="symbol">    key:</span> <span class="string">&quot;featureListKey&quot;</span></span><br><span class="line">    <span class="class">value </span>{</span><br><span class="line">      <span class="class">feature </span>{</span><br><span class="line">        <span class="class">float_list </span>{</span><br><span class="line"><span class="symbol">          value:</span> <span class="number">1.0</span></span><br><span class="line"><span class="symbol">          value:</span> <span class="number">2.0</span></span><br><span class="line"><span class="symbol">          value:</span> <span class="number">3.0</span></span><br><span class="line"><span class="symbol">          value:</span> <span class="number">4.0</span></span><br><span class="line"><span class="symbol">          value:</span> <span class="number">5.0</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      <span class="class">feature </span>{</span><br><span class="line">        <span class="class">int64_list </span>{</span><br><span class="line"><span class="symbol">          value:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">          value:</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">          value:</span> <span class="number">3</span></span><br><span class="line"><span class="symbol">          value:</span> <span class="number">4</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="class">feature_list </span>{</span><br><span class="line"><span class="symbol">    key:</span> <span class="string">&quot;emptyFeatureListKey&quot;</span></span><br><span class="line">    <span class="class">value </span>{</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">============================</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> tensorflow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tensorflow tfrecord sequenceExample </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【论文小品】Deep neural networks for YouTube recommendations</title>
      <link href="/2019/09/15/paper-reading-youtube-dnn-recommendation/"/>
      <url>/2019/09/15/paper-reading-youtube-dnn-recommendation/</url>
      
        <content type="html"><![CDATA[<p><a href="https://storage.googleapis.com/pub-tools-public-publication-data/pdf/45530.pdf" target="_blank" rel="noopener">&#x8BBA;&#x6587;&#x5730;&#x5740;</a></p><p>&#x8FD9;&#x7BC7;&#x8BBA;&#x6587;&#x4E3B;&#x8981;&#x662F;&#x8BB2;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x6A21;&#x578B;&#x5728;YouTube&#x89C6;&#x9891;&#x63A8;&#x8350;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x5305;&#x62EC;<strong>&#x5019;&#x9009;&#x96C6;&#x751F;&#x6210;&#x6A21;&#x578B;</strong>&#x548C;<strong>&#x6392;&#x5E8F;&#x6A21;&#x578B;</strong>&#x4E24;&#x90E8;&#x5206;&#x3002;</p><a id="more"></a><h1>&#x7CFB;&#x7EDF;&#x6982;&#x89C8;</h1><img src="/2019/09/15/paper-reading-youtube-dnn-recommendation/system_overview.png" title="&#x7CFB;&#x7EDF;&#x6982;&#x89C8;"><p>&#x7CFB;&#x7EDF;&#x4E3B;&#x8981;&#x7531;&#x5019;&#x9009;&#x96C6;&#x751F;&#x6210;&#x548C;&#x6392;&#x5E8F;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#x7EC4;&#x6210;&#x3002;&#x5019;&#x9009;&#x96C6;&#x751F;&#x6210;&#x89E3;&#x51B3;&#x7684;&#x662F;&#x7CFB;&#x7EDF;&#x65E0;&#x6CD5;&#x5BF9;&#x6D77;&#x91CF;&#x89C6;&#x9891;&#x8FDB;&#x884C;&#x5168;&#x8986;&#x76D6;&#x7684;&#x5728;&#x7EBF;&#x5B9E;&#x65F6;&#x6253;&#x5206;&#x3002;&#x6392;&#x5E8F;&#x89E3;&#x51B3;&#x7684;&#x662F;&#x63A8;&#x8350;&#x7ED3;&#x679C;&#x5448;&#x73B0;&#x7ED9;&#x7528;&#x6237;&#x7684;&#x6392;&#x5217;&#x987A;&#x5E8F;&#x3002;</p><p>&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x57FA;&#x672C;&#x6D41;&#x7A0B;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p><ol><li>&#x5019;&#x9009;&#x96C6;&#x751F;&#x6210;&#x6A21;&#x578B;&#x5229;&#x7528;&#x7528;&#x6237;&#x7684;&#x5386;&#x53F2;&#x884C;&#x4E3A;&#x548C;&#x8BBF;&#x95EE;&#x65F6;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x6570;&#x636E;&#xFF0C;&#x4ECE;&#x6D77;&#x91CF;&#x7684;&#x89C6;&#x9891;&#x5E93;&#x4E2D;&#x68C0;&#x7D22;&#x51FA;&#x4E00;&#x4E2A;&#x8F83;&#x5C0F;&#x7684;&#x89C6;&#x9891;&#x5E93;&#x5B50;&#x96C6;&#x3002;&#xFF08;&#x79BB;&#x7EBF;&#x7C97;&#x7B5B;&#xFF09;</li><li>&#x6392;&#x5E8F;&#x6A21;&#x578B;&#x6574;&#x5408;&#x591A;&#x79CD;&#x6E20;&#x9053;&#x7684;&#x89C6;&#x9891;&#x5E93;&#x5B50;&#x96C6;&#xFF0C;&#x5229;&#x7528;&#x7528;&#x6237;&#x7684;&#x5386;&#x53F2;&#x884C;&#x4E3A;&#x3001;&#x8BBF;&#x95EE;&#x65F6;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x6570;&#x636E;&#x3001;&#x89C6;&#x9891;&#x7279;&#x5F81;&#x7B49;&#xFF0C;&#x5B8C;&#x6210;&#x5BF9;&#x89C6;&#x9891;&#x7684;&#x6253;&#x5206;&#x6392;&#x5E8F;&#x3002;&#x5E76;&#x9009;&#x62E9;TopN&#x4E2A;&#x89C6;&#x9891;&#x63A8;&#x8350;&#x7ED9;&#x7528;&#x6237;&#x3002;&#xFF08;&#x5728;&#x7EBF;&#x7EC6;&#x7B5B;&#xFF09;</li></ol><p>&#x901A;&#x8FC7;&#x8BE5;&#x7CFB;&#x7EDF;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4ECE;&#x8D85;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x89C6;&#x9891;&#x5E93;&#x4E2D;&#xFF0C;&#x7B5B;&#x9009;&#x51FA;&#x4E2A;&#x6027;&#x5316;&#x7684;&#x63A8;&#x8350;&#x7ED3;&#x679C;&#x5448;&#x73B0;&#x7ED9;&#x7528;&#x6237;&#x3002;</p><blockquote><p>&#x6CE8;&#x610F;&#xFF1A;&#x79BB;&#x7EBF;&#x8BAD;&#x7EC3;&#x7684;&#x7ED3;&#x679C;&#x548C;&#x7EBF;&#x4E0A;&#x7684;&#x8868;&#x73B0;&#x4E0D;&#x4E00;&#x5B9A;&#x603B;&#x662F;&#x76F8;&#x5173;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6A21;&#x578B;&#x6700;&#x7EC8;&#x7684;&#x8868;&#x73B0;&#x8FD8;&#x9700;&#x8981;&#x5728;&#x7EBF;&#x4E0A;&#x8FDB;&#x884C;A/B&#x6D4B;&#x8BD5;</p></blockquote><h1>&#x5019;&#x9009;&#x96C6;&#x751F;&#x6210;&#x6A21;&#x578B;</h1><p>&#x5019;&#x9009;&#x96C6;&#x751F;&#x6210;&#x6A21;&#x578B;&#x5B8C;&#x6210;&#x4E86;&#x4ECE;&#x6D77;&#x91CF;&#x7684;&#x89C6;&#x9891;&#x5E93;&#x4E2D;&#xFF0C;&#x7C97;&#x7B5B;&#x51FA;&#x51E0;&#x767E;&#x4E2A;&#x548C;&#x7528;&#x6237;&#x6700;&#x76F8;&#x5173;&#x7684;&#x5019;&#x9009;&#x89C6;&#x9891;&#x3002;</p><h2>&#x6A21;&#x578B;&#x8F93;&#x51FA;</h2><p>&#x6A21;&#x578B;&#x6700;&#x7EC8;&#x5F97;&#x5230;&#x7684;&#x662F;&#x7528;&#x6237;&#x3001;&#x89C6;&#x9891;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5411;&#x91CF;&#x7A7A;&#x95F4;&#x7684;&#x6295;&#x5F71;&#x3002;&#x5373;&#xFF0C;&#x5F97;&#x5230;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7EF4;&#x5EA6;&#x7684;&#x3001;&#x80FD;&#x591F;&#x8FDB;&#x884C;&#x70B9;&#x79EF;&#x8BA1;&#x7B97;&#x7684;&#x7528;&#x6237;&#x548C;&#x89C6;&#x9891;&#x5411;&#x91CF;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x7528;&#x6237;$U$&#x5BF9;&#x89C6;&#x9891;$V$&#x7684;&#x5174;&#x8DA3;&#x7A0B;&#x5EA6;&#x8868;&#x793A;&#x4E3A;&#xFF1A;</p><p>$$ score = U \cdot V $$</p><p>&#x5982;&#x679C;&#x5C06;&#x70B9;&#x4E58;&#x4F5C;&#x4E3A;&#x5411;&#x91CF;&#x76F8;&#x4F3C;&#x5EA6;&#x7684;&#x8BA1;&#x7B97;&#x65B9;&#x6CD5;&#xFF0C;&#x5219;&#x8DDD;&#x79BB;&#x7528;&#x6237;$U$&#x6700;&#x8FD1;&#x7684;$N$&#x4E2A;&#x89C6;&#x9891;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x6700;&#x7EC8;&#x9700;&#x8981;&#x7684;&#x89C6;&#x9891;&#x5019;&#x9009;&#x96C6;&#x3002;</p><h3>&#x6700;&#x8FD1;&#x90BB;&#xFF08;NN)&#x4E0E;&#x8FD1;&#x4F3C;&#x6700;&#x8FD1;&#x90BB;&#xFF08;ANN&#xFF09;</h3><p>&#x901A;&#x5E38;&#x6765;&#x8BB2;&#xFF0C;&#x5728;&#x5411;&#x91CF;&#x7EF4;&#x5EA6;&#x4E0D;&#x9AD8;&#x3001;&#x8BA1;&#x7B97;&#x590D;&#x6742;&#x5EA6;&#x5C1A;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x7CBE;&#x786E;&#x68C0;&#x7D22;&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x7EF4;&#x5EA6;&#x8FC7;&#x5927;&#xFF0C;&#x7CBE;&#x786E;&#x68C0;&#x7D22;&#x7684;&#x8BA1;&#x7B97;&#x82B1;&#x8D39;&#x5DF2;&#x7ECF;&#x5230;&#x4E86;&#x8BA9;&#x4EBA;&#x65E0;&#x6CD5;&#x5BB9;&#x5FCD;&#x7684;&#x5730;&#x6B65;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x9009;&#x62E9;&#x8FD1;&#x4F3C;&#x68C0;&#x7D22;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x727A;&#x7272;&#x5C11;&#x8BB8;&#x7684;&#x7CBE;&#x5EA6;&#xFF0C;&#x6765;&#x6362;&#x53D6;&#x53EF;&#x89C2;&#x7684;&#x6548;&#x7387;&#x63D0;&#x5347;&#x3002;</p><p><strong>&#x7CBE;&#x786E;&#x68C0;&#x7D22;</strong>&#xFF1A;KD&#x6811;&#x3001;R&#x6811;&#x3001;M&#x6811;</p><p><strong>&#x8FD1;&#x4F3C;&#x68C0;&#x7D22;</strong>&#xFF1A;&#x5C40;&#x90E8;&#x654F;&#x611F;&#x54C8;&#x5E0C;&#xFF08;LSH&#xFF09;&#x3001;&#x4E58;&#x79EF;&#x91CF;&#x5316;&#xFF08;PQ&#xFF09;</p><h2>&#x76EE;&#x6807;&#x95EE;&#x9898;</h2><p>&#x4E0A;&#x9762;&#x6784;&#x60F3;&#x7684;&#x5F88;&#x597D;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x5982;&#x4F55;&#x5F97;&#x5230;&#x5B83;&#x4EEC;&#x5462;&#xFF1F;YouTube&#x56E2;&#x961F;&#x5DE7;&#x5999;&#x5730;&#x5C06;&#x89C6;&#x9891;&#x63A8;&#x8350;&#x95EE;&#x9898;&#x8F6C;&#x6362;&#x6210;&#x4E86;&#x591A;&#x5206;&#x7C7B;&#x95EE;&#x9898;&#x3002;</p><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5C06;&#x6BCF;&#x4E2A;&#x89C6;&#x9891;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x7C7B;&#x522B;&#xFF0C;&#x5219;&#x89C6;&#x9891;&#x63A8;&#x8350;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x63CF;&#x8FF0;&#xFF1A;</p><blockquote><p>&#x5728;&#x7ED9;&#x5B9A;&#x7528;&#x6237;$U$&#x548C;&#x4E0A;&#x4E0B;&#x6587;$C$&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9884;&#x6D4B;&#x5728;&#x65F6;&#x95F4;$t$&#xFF0C;&#x7C7B;&#x522B;$w_t$&#x4E3A;&#x89C6;&#x9891;$i$&#x7684;&#x6982;&#x7387;</p></blockquote><p>$$P(w_t=i|U,C) = \dfrac {e^{u \cdot v_i}} {\sum_{j \in V} {e^{u \cdot v_i}}}$$</p><p>&#x4E0A;&#x9762;&#x662F;&#x591A;&#x5206;&#x7C7B;&#x4E2D;&#x7528;&#x5230;&#x7684;SoftMax&#x516C;&#x5F0F;&#xFF0C;&#x8FD9;&#x91CC; $v_i \in R^N$&#xFF0C;$u \in R^N$&#xFF0C;&#x5206;&#x522B;&#x8868;&#x793A;&#x89C6;&#x9891;&#x548C;&#x7528;&#x6237;&#x7684;&#x5D4C;&#x5165;&#x5411;&#x91CF;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x8BAD;&#x7EC3;&#x4EFB;&#x52A1;&#x5C31;&#x662F;&#x5F97;&#x5230;&#x8FD9;&#x4E24;&#x4E2A;&#x5D4C;&#x5165;&#x5411;&#x91CF;&#x3002;</p><p>&#x4E0B;&#x9762;&#x8BF4;&#x4E00;&#x4E0B;&#x6309;&#x7167;SoftMax&#x76F4;&#x63A5;&#x8BAD;&#x7EC3;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x3002;</p><h3>softmax loss</h3><p>&#x5355;&#x6761;&#x6837;&#x672C;&#x635F;&#x5931;&#x51FD;&#x6570;&#xFF1A;</p><p>$$Loss = - \sum_{i \in V}^{|V|} {y_i} \log {P(y=i)}$$</p><p>$V$&#x8868;&#x793A;&#x7C7B;&#x522B;&#x7A7A;&#x95F4;&#xFF0C;$y_i$&#x662F;&#x5B9E;&#x9645;&#x7684;&#x6982;&#x7387;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x7684;&#x53D6;&#x503C;&#x53EA;&#x6709;0&#x548C;1&#x3002;&#x5982;&#x679C;&#x662F;&#x5355;&#x5206;&#x7C7B;&#x95EE;&#x9898;&#xFF0C;&#x6BCF;&#x6761;&#x6837;&#x672C;&#x53EA;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x7C7B;&#x522B;&#xFF0C;&#x5C31;&#x4F1A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;$y_i$&#x7684;&#x503C;&#x4E3A;1&#x3002;</p><p>$P(y=i)$&#x662F;&#x6A21;&#x578B;&#x9884;&#x6D4B;&#x7C7B;&#x522B;&#x4E3A;$i$&#x7684;&#x6982;&#x7387;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x53D6;&#x503C;&#x4ECB;&#x4E8E;[0,1]&#x3002;&#x5177;&#x4F53;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x5982;&#x4E0B;&#xFF08;&#x5C31;&#x662F;softMax&#x516C;&#x5F0F;&#xFF09;&#xFF1A;</p><p>$$P(y=i) = \dfrac {e^{u \cdot v_i}} { \sum_{j \in V} { e^{u \cdot v_i}}}$$</p><p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x516C;&#x5F0F;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x4E3A;&#x4E86;&#x8BA1;&#x7B97;&#x4E00;&#x6761;&#x6837;&#x672C;&#x7684;loss&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5BF9;$V$&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x7C7B;&#x522B;&#x90FD;&#x8BA1;&#x7B97;&#x4E00;&#x6B21;softMax&#x3002;&#x5F53;$|V|$&#x7684;&#x503C;&#x5F88;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5355;&#x6761;&#x6837;&#x672C;loss&#x7684;&#x8BA1;&#x7B97;&#x6210;&#x672C;&#x4F1A;&#x5F88;&#x9AD8;&#x3002;</p><p><strong>&#x8BBA;&#x6587;&#x4E2D;&#x7684;&#x76EE;&#x6807;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x522B;&#x7A7A;&#x95F4;&#x8D85;&#x7EA7;&#x5927;&#x7684;&#x591A;&#x5206;&#x7C7B;&#x95EE;&#x9898;&#x3002;</strong></p><h3>&#x8D1F;&#x91C7;&#x6837;</h3><p>&#x4E3A;&#x4E86;&#x52A0;&#x5FEB;&#x6A21;&#x578B;&#x8BAD;&#x7EC3;&#xFF0C;&#x8BBA;&#x6587;&#x4E2D;&#x91C7;&#x7528;&#x4E86;&#x8D1F;&#x91C7;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x8D1F;&#x91C7;&#x6837;&#x662F;&#x4E00;&#x79CD;&#x5019;&#x9009;&#x91C7;&#x6837;&#x65B9;&#x6CD5;&#x3002;</p><h4>&#x5E94;&#x7528;&#x573A;&#x666F;&#x63CF;&#x8FF0;</h4><p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x6709;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x6837;&#x672C;&#x96C6;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4E2A;&#x6837;&#x672C;&#x7531;$(x_i, T_i)$&#xFF0C;&#x5176;&#x4E2D;$x_i$&#x662F;&#x8F93;&#x5165;&#x7279;&#x5F81;&#xFF0C;$T_i$&#x662F;&#x4E00;&#x4E2A;target&#x5C0F;&#x96C6;&#x5408;&#xFF0C;&#x6EE1;&#x8DB3;$T \subset L$, $|T| &lt;&lt; |L|$&#x3002;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x6807;&#x662F;&#x5B66;&#x4E60;&#x4E00;&#x4E2A;$F(x, y)$&#xFF0C;&#x4F7F;&#x5F97;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;$x$&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9884;&#x6D4B;&#x51FA;&#x7C7B;&#x522B;$y$&#x4E3A;&#x6B63;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;</p><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x6B63;&#x5E38;&#x7684;softmax&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x8BA1;&#x7B97;&#x6BCF;&#x4E00;&#x4E2A;sample&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x9700;&#x8981;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x96C6;&#x5408;&#xFF0C;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x7684;&#x7C7B;&#x522B;&#x90FD;&#x8BA1;&#x7B97;&#x4E00;&#x6B21;&#x3002;&#x5728;&#x7C7B;&#x522B;&#x96C6;&#x5408;&#x7279;&#x522B;&#x5927;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x8BA1;&#x7B97;&#x6210;&#x672C;&#x5F88;&#x9AD8;&#x3002;</p><h4>&#x5019;&#x9009;&#x91C7;&#x6837;</h4><p>&#x5728;&#x8BAD;&#x7EC3;&#x6BCF;&#x4E2A;&#x6837;&#x672C;$(x_i, T_i)$&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;$F(x, y)$&#x5728;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x5019;&#x9009;&#x7C7B;&#x522B;&#x96C6;&#x5408;$C_i$&#x8FDB;&#x884C;&#x8BC4;&#x4F30;&#x3002;&#x5176;&#x4E2D;&#xFF0C;$C_i = T_i \bigcup S_i$&#x3002;&#x8FD9;&#x91CC;&#x7684;$S_i$&#x662F;&#x57FA;&#x4E8E;&#x6307;&#x5B9A;&#x7684;&#x968F;&#x673A;&#x91C7;&#x6837;&#x65B9;&#x6CD5;&#x83B7;&#x5F97;&#x7684;&#x4E00;&#x4E2A;&#x7C7B;&#x522B;&#x5B50;&#x96C6;&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;$S_i \subset L$</p><p>&#x4E0A;&#x8FF0;&#x968F;&#x673A;&#x91C7;&#x6837;&#x5F97;&#x5230;$S_i$&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x662F;&#x5426;&#x4F9D;&#x8D56;$x_i$&#x548C;$T_i$&#x4E0D;&#x505A;&#x9650;&#x5236;&#x3002;</p><blockquote><p>&#x8BBA;&#x6587;&#x4E2D;&#x91C7;&#x7528;&#x7684;&#x8D1F;&#x91C7;&#x6837;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x4ECE;&#x89C6;&#x9891;&#x5E93;&#x4E2D;&#x968F;&#x673A;&#x9009;&#x62E9;&#x4E00;&#x4E9B;&#x89C6;&#x9891;&#x4F5C;&#x4E3A;&#x8D1F;&#x4F8B;&#x6807;&#x7B7E;</p></blockquote><p><a href="https://www.tensorflow.org/extras/candidate_sampling.pdf" target="_blank" rel="noopener">tensorflow&#x5173;&#x4E8E;&#x5019;&#x9009;&#x91C7;&#x6837;&#x7684;&#x4ECB;&#x7ECD;</a></p><h2>&#x6A21;&#x578B;&#x7ED3;&#x6784;</h2><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x6A21;&#x578B;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7528;&#x6237;&#x3001;&#x89C6;&#x9891;&#x7279;&#x5F81;&#x5411;&#x540C;&#x4E00;&#x7A7A;&#x95F4;&#x6295;&#x5F71;&#x7684;&#x3002;</p><img src="/2019/09/15/paper-reading-youtube-dnn-recommendation/model_architecture.png" title="&#x5019;&#x9009;&#x751F;&#x6210;&#x6A21;&#x578B;"><h3>&#x6837;&#x672C;&#x7279;&#x5F81;</h3><p>&#x7528;&#x6237;&#x5386;&#x53F2;&#x89C2;&#x770B;&#x89C6;&#x9891;&#x5217;&#x8868;&#xFF0C;&#x7528;&#x6237;&#x5386;&#x53F2;&#x641C;&#x7D22;&#x8BB0;&#x5F55;&#x5217;&#x8868;&#xFF0C;&#x7528;&#x6237;&#x6027;&#x522B;&#xFF0C;&#x7528;&#x6237;&#x5E74;&#x9F84;&#xFF0C;&#x7528;&#x6237;&#x5730;&#x57DF;&#xFF0C;&#x884C;&#x4E3A;&#x8BBF;&#x95EE;&#x8BBE;&#x5907;&#xFF0C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x72B6;&#x6001;&#xFF0C;&#x6837;&#x672C;&#x5E74;&#x9F84;&#xFF0C;&#x89C6;&#x9891;ID</p><h4>&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7279;&#x5F81;&#x7684;&#x5904;&#x7406;</h4><ul><li><p>&#x79BB;&#x6563;&#x7279;&#x5F81;&#xFF1A;&#x3010;&#x7528;&#x6237;&#x5386;&#x53F2;&#x89C2;&#x770B;&#x89C6;&#x9891;&#x5217;&#x8868;&#xFF0C;&#x7528;&#x6237;&#x5386;&#x53F2;&#x641C;&#x7D22;&#x8BB0;&#x5F55;&#x5217;&#x8868;&#xFF0C;&#x7528;&#x6237;&#x6027;&#x522B;&#xFF0C;&#x7528;&#x6237;&#x5E74;&#x9F84;&#xFF0C;&#x7528;&#x6237;&#x5730;&#x57DF;&#xFF0C;&#x884C;&#x4E3A;&#x8BBF;&#x95EE;&#x8BBE;&#x5907;&#xFF0C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x72B6;&#x6001;&#xFF0C;&#x89C6;&#x9891;ID&#x3011;</p><ul><li>oneHot&#xFF1A;&#x4E3A;&#x6240;&#x6709;&#x53D6;&#x503C;&#x5339;&#x914D;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x7F16;&#x53F7;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x503C;&#x4E3A;1&#xFF0C;&#x5176;&#x4F59;&#x4F4D;&#x7F6E;&#x90FD;&#x4E3A;0&#x3002;<ul><li>&#x6BD4;&#x5982;&#xFF1A;&#x6027;&#x522B;&#x7279;&#x5F81;&#x5305;&#x62EC;&#x7537;&#x6027;&#x3001;&#x5973;&#x6027;&#x4E24;&#x79CD;&#xFF0C;&#x5219;&#x7528;[1,0]&#x8868;&#x793A;&#x7537;&#x6027;&#xFF0C;&#x7528;[0,1]&#x8868;&#x793A;&#x5973;&#x6027;</li></ul></li><li>multiHot&#xFF1A;&#x5BF9;&#x4E8E;&#x591A;&#x503C;&#x7279;&#x5F81;&#xFF0C;&#x6BCF;&#x4E2A;&#x503C;&#x5BF9;&#x5E94;&#x7684;&#x4F4D;&#x7F6E;&#x90FD;&#x8BBE;&#x7F6E;&#x4E3A;1&#xFF0C;&#x5176;&#x4F59;&#x4F4D;&#x7F6E;&#x90FD;&#x4E3A;0&#x3002;<ul><li>&#x6BD4;&#x5982;&#xFF1A;&#x64C5;&#x957F;&#x7684;&#x8BED;&#x8A00;&#x5305;&#x62EC;Java&#x3001;C&#x3001;Python&#x3001;Swift&#xFF0C;&#x5982;&#x679C;&#x540C;&#x65F6;&#x4F1A;Java&#x548C;Python&#xFF0C;&#x5219;&#x7528;[1,0,1,0]&#x8868;&#x793A;</li></ul></li><li>Embedding&#xFF1A;&#x4E3A;&#x6BCF;&#x4E00;&#x79CD;&#x53D6;&#x503C;&#x5339;&#x914D;&#x4E00;&#x4E2A;$n$&#x7EF4;&#x7684;&#x5411;&#x91CF;&#xFF0C;&#x5411;&#x91CF;&#x7684;&#x503C;&#x662F;&#x901A;&#x8FC7;&#x6A21;&#x578B;&#x8BAD;&#x7EC3;&#x5F97;&#x5230;&#x7684;&#x3002;<ul><li>&#x6BD4;&#x5982;&#xFF1A;&#x57CE;&#x5E02;&#x7C7B;&#x578B;&#x5305;&#x62EC;&#x4E00;&#x7EBF;&#x57CE;&#x5E02;&#x3001;&#x4E8C;&#x7EBF;&#x57CE;&#x5E02;&#x3001;&#x4E09;&#x7EBF;&#x57CE;&#x5E02;&#x3001;&#x56DB;&#x7EBF;&#x57CE;&#x5E02;&#xFF0C;&#x5982;&#x679C;&#x7528;3&#x7EF4;&#x7684;&#x5411;&#x91CF;&#x6765;&#x505A;&#x5D4C;&#x5165;&#xFF0C;&#x5219;&#x4E00;&#x7EBF;&#x57CE;&#x5E02;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x4E3A;[1.2,3.1,2.1]&#x3002;</li></ul></li></ul></li><li><p>&#x8FDE;&#x7EED;&#x7279;&#x5F81;&#xFF1A;&#x3010;&#x6837;&#x672C;&#x5E74;&#x9F84;&#x3011;</p><ul><li>&#x7279;&#x5F81;&#x79BB;&#x6563;&#x5316;&#xFF0C;&#x6309;&#x7167;&#x79BB;&#x6563;&#x7279;&#x5F81;&#x5904;&#x7406;</li><li>&#x8FDB;&#x884C;&#x5F52;&#x4E00;&#x5316;&#x3001;&#x5F00;&#x65B9;&#x3001;&#x5E73;&#x65B9;&#x7B49;&#x65B9;&#x5F0F;&#x5904;&#x7406;</li></ul></li></ul><p>&#x5C06;&#x4E0A;&#x9762;&#x5404;&#x4E2A;&#x5411;&#x91CF;&#xFF08;&#x9664;&#x4E86;&#x89C6;&#x9891;ID&#xFF09;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C;&#xFF08;concat&#xFF09;&#xFF0C;&#x5F97;&#x5230;&#x4E00;&#x4E2A;1 * N &#x7EF4;&#x7684;&#x5411;&#x91CF;&#x3002;&#x5982;&#x679C;&#x662F;&#x591A;&#x6279;&#x6B21;&#x8BAD;&#x7EC3;&#xFF0C;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A;batch_size * 1 * N&#x7684;&#x5411;&#x91CF;&#x3002;&#x8FD9;&#x91CC;&#x7684;N&#x662F;&#x4E0A;&#x9762;&#x6240;&#x6709;&#x7279;&#x5F81;&#x7684;&#x7EF4;&#x5EA6;&#x4E4B;&#x548C;&#x3002;</p><blockquote><h3>&#x5173;&#x4E8E;&#x79BB;&#x6563;&#x7279;&#x5F81;&#x548C;&#x8FDE;&#x7EED;&#x7279;&#x5F81;&#x7684;&#x533A;&#x5206;</h3><p>&#x4E0D;&#x80FD;&#x8BF4;&#x6570;&#x503C;&#x578B;&#x7279;&#x5F81;&#x5C31;&#x4E00;&#x5B9A;&#x662F;&#x8FDE;&#x7EED;&#x7279;&#x5F81;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5BF9;&#x4E8E;&#x5E74;&#x9F84;&#x8FD9;&#x79CD;&#x6570;&#x503C;&#x578B;&#x7279;&#x5F81;&#xFF0C;&#x5176;&#x53EA;&#x6709;&#x6BD4;&#x8F83;&#x610F;&#x4E49;&#xFF0C;&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x8BA1;&#x7B97;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5E74;&#x9F84;&#x5E94;&#x8BE5;&#x5C5E;&#x4E8E;&#x79BB;&#x6563;&#x7279;&#x5F81;&#x3002;</p><h3>&#x5173;&#x4E8E;&#x7528;&#x6237;&#x5386;&#x53F2;&#x89C2;&#x770B;&#x89C6;&#x9891;&#x5217;&#x8868;&#x548C;&#x7528;&#x6237;&#x5386;&#x53F2;&#x641C;&#x7D22;&#x8BB0;&#x5F55;&#x5217;&#x8868;&#x7684;&#x5408;&#x5E76;</h3><p>&#x5C06;&#x591A;&#x4E2A;&#x89C6;&#x9891;&#x7684;&#x5D4C;&#x5165;&#x5411;&#x91CF;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x5411;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;sum&#x3001;mean&#x3001;sqrtn&#x3001;attention&#x7B49;&#x65B9;&#x6CD5;</p><h3>&#x5173;&#x4E8E;&#x89C6;&#x9891;ID&#x5D4C;&#x5165;&#x5411;&#x91CF;&#x7684;&#x8BF4;&#x660E;</h3><p>&#x6A21;&#x578B;&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#x5730;&#x65B9;&#x90FD;&#x4F7F;&#x7528;&#x4E86;&#x89C6;&#x9891;ID&#x7684;&#x5D4C;&#x5165;&#x5411;&#x91CF;&#xFF0C;&#x5206;&#x522B;&#x662F;<strong>&#x8BA1;&#x7B97;&#x7528;&#x6237;&#x5386;&#x53F2;&#x89C2;&#x770B;&#x89C6;&#x9891;&#x5217;&#x8868;</strong>&#x548C;&#x6A21;&#x578B;&#x8F93;&#x51FA;&#x65F6;<strong>&#x8BA1;&#x7B97;&#x7528;&#x6237;&#x5411;&#x91CF;&#x548C;&#x89C6;&#x9891;&#x5411;&#x91CF;&#x7684;&#x70B9;&#x79EF;</strong></p><p>&#x7ECF;&#x8FC7;&#x5B9E;&#x9A8C;&#x5BF9;&#x6BD4;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x5730;&#x65B9;&#x8FDB;&#x884C;&#x5D4C;&#x5165;&#x5411;&#x91CF;&#x7684;&#x5171;&#x4EAB;&#x6BD4;&#x5206;&#x522B;&#x505A;&#x5D4C;&#x5165;&#x7684;&#x5B9E;&#x9645;&#x6548;&#x679C;&#x8981;&#x597D;&#x3002;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x5171;&#x4EAB;&#x89C6;&#x9891;ID&#x5D4C;&#x5165;&#x5411;&#x91CF;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x3002;</p><h3>&#x5173;&#x4E8E;&#x6837;&#x672C;&#x5E74;&#x9F84;&#x7684;&#x8BF4;&#x660E;</h3><p>&#x5728;&#x89C6;&#x9891;&#x9886;&#x57DF;&#xFF0C;&#x901A;&#x5E38;&#x6765;&#x8BF4;&#xFF0C;&#x7528;&#x6237;&#x66F4;&#x503E;&#x5411;&#x4E8E;&#x70B9;&#x51FB;&#x65B0;&#x4E0A;&#x4F20;&#x7684;&#x89C6;&#x9891;&#x3002;&#x800C;&#x57FA;&#x4E8E;&#x7528;&#x6237;&#x5386;&#x53F2;&#x884C;&#x4E3A;&#x7684;&#x8BAD;&#x7EC3;&#xFF0C;&#x6A21;&#x578B;&#x901A;&#x5E38;&#x4F1A;&#x503E;&#x5411;&#x4E8E;&#x63A8;&#x8350;&#x5DF2;&#x89C2;&#x770B;&#x7684;&#x65E7;&#x89C6;&#x9891;&#x3002;</p><p>&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;&#x7279;&#x70B9;&#xFF0C;&#x8BBA;&#x6587;&#x4E2D;&#x5C06;&#x6837;&#x672C;&#x5E74;&#x9F84;&#x52A0;&#x5165;&#x5230;&#x4E86;&#x6A21;&#x578B;&#x7279;&#x5F81;&#x4E2D;&#xFF0C;&#x4F7F;&#x5F97;&#x6A21;&#x578B;&#x53EF;&#x4EE5;&#x5B66;&#x4E60;&#x5230;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x7684;&#x65F6;&#x5E8F;&#x7279;&#x5F81;&#x3002;</p><p><strong><em>&#x6837;&#x672C;&#x5E74;&#x9F84;&#x6307;&#x7684;&#x662F;&#xFF0C;&#x8BAD;&#x7EC3;&#x6837;&#x672C;&#x7684;&#x89E6;&#x53D1;&#x65F6;&#x95F4;&#x8DDD;&#x79BB;&#x6A21;&#x578B;&#x8BAD;&#x7EC3;&#x65F6;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x3002;</em></strong></p><p>&#x6BD4;&#x5982;&#xFF0C;&#x6A21;&#x578B;&#x8BAD;&#x7EC3;&#x7684;&#x65F6;&#x95F4;&#x662F;2019&#x5E74;10&#x6708;01&#x53F7;&#xFF0C;&#x800C;&#x6837;&#x672C;&#x4E2D;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x7684;&#x89E6;&#x53D1;&#x65F6;&#x95F4;&#x662F;2019&#x5E74;09&#x6708;20&#x53F7;&#xFF0C;&#x5219;&#x8FD9;&#x91CC;&#x7684;&#x6837;&#x672C;&#x65F6;&#x95F4;&#x5C31;&#x662F;10&#x5929;&#x3002;</p><p>&#x52A0;&#x5165;<strong>&#x6837;&#x672C;&#x5E74;&#x9F84;</strong>&#x4E4B;&#x540E;&#xFF0C;&#x6574;&#x4E2A;&#x9884;&#x6D4B;&#x7684;&#x7ED3;&#x679C;&#x5C31;&#x548C;&#x9884;&#x671F;&#x7684;&#x7528;&#x6237;&#x70B9;&#x51FB;&#x884C;&#x4E3A;&#x5206;&#x5E03;&#x57FA;&#x672C;&#x4E00;&#x81F4;&#x4E86;&#x3002;</p><img src="/2019/09/15/paper-reading-youtube-dnn-recommendation/video_upload_time.png" title="&#x6837;&#x672C;&#x5E74;&#x9F84;"><p>&#x5728;&#x6A21;&#x578B;&#x9884;&#x6D4B;&#x65F6;&#xFF0C;&#x4F1A;&#x5C06;&#x6837;&#x672C;&#x5E74;&#x9F84;&#x8BBE;&#x7F6E;&#x4E3A;0&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5F88;&#x5C0F;&#x7684;&#x8D1F;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x6A21;&#x578B;&#x5728;&#x5BF9;&#x5F53;&#x524D;&#x7684;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x9884;&#x6D4B;&#x3002;</p><h3>&#x6837;&#x672C;&#x5E74;&#x9F84;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x6709;&#x6548;&#x679C;</h3><p>&#x6837;&#x672C;&#x5E74;&#x9F84;&#x80FD;&#x591F;&#x53CD;&#x6620;&#x4E00;&#x4E2A;&#x89C6;&#x9891;&#x4ECE;&#x5F00;&#x59CB;&#x88AB;&#x70B9;&#x51FB;&#xFF0C;&#x5230;&#x70B9;&#x51FB;&#x91CF;&#x8FBE;&#x5230;&#x6700;&#x9AD8;&#x70B9;&#xFF0C;&#x518D;&#x5230;&#x70B9;&#x51FB;&#x91CF;&#x9010;&#x6E10;&#x56DE;&#x843D;&#x7684;&#x53D8;&#x5316;&#x8D8B;&#x52BF;&#x3002;<br>&#x6A21;&#x578B;&#x901A;&#x8FC7;&#x5BF9;&#x8FD9;&#x79CD;&#x8D8B;&#x52BF;&#x7684;&#x5B66;&#x4E60;&#xFF0C;&#x80FD;&#x591F;&#x8BC6;&#x522B;&#x51FA;&#x90A3;&#x4E9B;&#x70B9;&#x51FB;&#x91CF;&#x5904;&#x5728;&#x8F83;&#x9AD8;&#x4F4D;&#x7F6E;&#x7684;&#x65B0;&#x89C6;&#x9891;</p><h3>&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x4F7F;&#x7528;&#x89C6;&#x9891;&#x4E0A;&#x4F20;&#x65F6;&#x95F4;</h3><p>&#x901A;&#x8FC7;&#x6A21;&#x578B;&#x7ED3;&#x6784;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6837;&#x672C;&#x5E74;&#x9F84;&#x662F;&#x6A21;&#x578B;&#x7684;&#x8F93;&#x5165;&#x7279;&#x5F81;&#x3002;&#x800C;&#x8F93;&#x5165;&#x7279;&#x5F81;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x5F97;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x7528;&#x6237;&#x5411;&#x91CF;&#x3002;&#x7531;&#x4E8E;&#x67D0;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x5411;&#x91CF;&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x53EA;&#x4F9D;&#x8D56;&#x67D0;&#x4E00;&#x4E2A;&#x89C6;&#x9891;&#x7279;&#x5F81;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x8F93;&#x5165;&#x7279;&#x5F81;&#x91CC;&#x4E0D;&#x80FD;&#x5305;&#x542B;&#x67D0;&#x4E00;&#x4E2A;&#x89C6;&#x9891;&#x7684;&#x4E0A;&#x4F20;&#x65F6;&#x95F4;&#x3002;</p></blockquote><h3>&#x9690;&#x542B;&#x5C42;</h3><p>&#x8BBA;&#x6587;&#x4E2D;&#x91C7;&#x7528;&#x5854;&#x5F0F;&#x7684;&#x5C42;&#x7ED3;&#x6784;&#xFF08;&#x5177;&#x4F53;&#x53EF;&#x89C1;&#x53C2;&#x52A0;&#x4E0A;&#x9762;&#x7684;&#x6A21;&#x578B;&#x7ED3;&#x679C;&#x56FE;&#xFF09;&#xFF0C;&#x5BF9;&#x5305;&#x542B;0&#x3001;1&#x3001;2&#x3001;3&#x3001;4&#x5C42;&#x9690;&#x542B;&#x5C42;&#x8FDB;&#x884C;&#x5B9E;&#x9A8C;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;0&#x3001;256&#x3001;512&#x3001;1024&#x3001;2048&#x4E2A;&#x9690;&#x85CF;&#x5355;&#x5143;&#x3002;&#x4E0B;&#x56FE;&#x5C55;&#x793A;&#x4E86;&#x4E0D;&#x540C;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x5B9E;&#x9A8C;&#x7ED3;&#x679C;&#xFF1A;</p><img src="/2019/09/15/paper-reading-youtube-dnn-recommendation/hidden_network.png" title="&#x9690;&#x542B;&#x5C42;"><p>&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x9690;&#x542B;&#x5C42;&#x8D85;&#x8FC7;3&#x5C42;&#xFF0C;&#x5BF9;&#x6A21;&#x578B;&#x6548;&#x679C;&#x7684;&#x63D0;&#x5347;&#x8D21;&#x732E;&#x5C31;&#x4E0D;&#x5927;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;3&#x5C42;&#x9690;&#x542B;&#x5C42;&#x3002;</p><h3>&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x7684;&#x5904;&#x7406;</h3><p>&#x8BBA;&#x6587;&#x4E2D;&#x5BF9;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x4E86;&#x5C1D;&#x8BD5;&#xFF0C;&#x7ED9;&#x51FA;&#x4E86;&#x4E00;&#x4E9B;&#x503C;&#x5F97;&#x501F;&#x9274;&#x7684;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x5904;&#x7406;&#x5EFA;&#x8BAE;&#xFF1A;</p><ul><li>&#x9009;&#x62E9;&#x66F4;&#x5E7F;&#x6CDB;&#x7684;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x53EA;&#x5305;&#x542B;&#x63A8;&#x8350;&#x7684;&#x884C;&#x4E3A;&#x6570;&#x636E;<ul><li>&#x53D1;&#x73B0;&#x65B0;&#x5185;&#x5BB9;&#xFF0C;&#x907F;&#x514D;&#x63A8;&#x8350;&#x7ED3;&#x679C;&#x88AB;&#x8FC7;&#x5206;&#x5229;&#x7528;&#xFF08;Exploration &amp; Exploitation&#xFF09;</li></ul></li><li>&#x4E3A;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x751F;&#x6210;&#x56FA;&#x5B9A;&#x6570;&#x636E;&#x7684;&#x8BAD;&#x7EC3;&#x6570;&#x636E;<ul><li>&#x907F;&#x514D;loss&#x88AB;&#x5C11;&#x6570;&#x7279;&#x522B;&#x6D3B;&#x8DC3;&#x7684;&#x7528;&#x6237;&#x5F71;&#x54CD;</li></ul></li><li>&#x53BB;&#x9664;&#x89C6;&#x9891;&#x89C2;&#x770B;&#x7684;&#x5E8F;&#x5217;&#x7279;&#x5F81;<ul><li>&#x8BBA;&#x6587;&#x4E2D;&#x7ED9;&#x51FA;&#x7684;&#x89E3;&#x91CA;&#x662F;&#xFF1A;&#x53EF;&#x80FD;&#x6A21;&#x578B;&#x6CA1;&#x6709;&#x5BF9;&#x8D1F;&#x53CD;&#x9988;&#x8FDB;&#x884C;&#x5F88;&#x597D;&#x7684;&#x5EFA;&#x6A21;</li></ul></li><li>&#x4E0D;&#x5BF9;&#x79F0;&#x6D4F;&#x89C8;&#x884C;&#x4E3A;<ul><li>&#x5229;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x9884;&#x6D4B;&#x4E2D;&#x95F4;&#x884C;&#x4E3A;&#xFF08;&#x4E0B;&#x9762;&#x7684;&#x66F4;&#x597D;&#xFF09;<ul><li>&#x5F88;&#x591A;&#x534F;&#x540C;&#x8FC7;&#x6EE4;&#x7CFB;&#x7EDF;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x57FA;&#x4E8E;&#x4E0A;&#x4E0B;&#x6587;&#x9884;&#x6D4B;&#x4E2D;&#x95F4;&#x884C;&#x4E3A;</li></ul></li><li>&#x5229;&#x7528;&#x4E0A;&#x6587;&#x4FE1;&#x606F;&#x9884;&#x6D4B;&#x63A5;&#x672A;&#x6765;&#x884C;&#x4E3A;&#xFF08;&#x8FD9;&#x4E2A;&#x66F4;&#x597D;&#xFF09;</li></ul></li></ul><img src="/2019/09/15/paper-reading-youtube-dnn-recommendation/behavior.png" title="&#x4E0D;&#x5BF9;&#x79F0;&#x6D4F;&#x89C8;"><blockquote><h3>Exploration &amp; Exploitation</h3><p>&#x63A2;&#x7D22;&#x4E0E;&#x5229;&#x7528;&#x95EE;&#x9898;&#x662F;&#x5F3A;&#x5316;&#x5B66;&#x4E60;&#x4E2D;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x6982;&#x5FF5;</p><h4>&#x573A;&#x666F;&#x4E3E;&#x4F8B;</h4><p>&#x516C;&#x53F8;&#x9644;&#x8FD1;&#x6709;&#x5F88;&#x591A;&#x9910;&#x9986;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5C1D;&#x8BD5;&#x8FC7;&#x51E0;&#x5BB6;&#xFF0C;&#x5E76;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x7684;&#x8BC4;&#x4EF7;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x5F97;&#x5230;&#x6700;&#x5927;&#x5316;&#x7F8E;&#x98DF;&#x5E26;&#x6765;&#x7684;&#x4F53;&#x9A8C;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x9009;&#x62E9;&#x9910;&#x9986;&#xFF1F;</p><p><strong>&#x63A2;&#x7D22;</strong>&#xFF1A;&#x6211;&#x4EEC;&#x968F;&#x673A;&#x7684;&#x9009;&#x62E9;&#x9910;&#x9986;&#xFF0C;&#x4EE5;&#x5F97;&#x5230;&#x5BF9;&#x66F4;&#x591A;&#x9910;&#x9986;&#x66F4;&#x7CBE;&#x786E;&#x7684;&#x8BC4;&#x4EF7;&#x3002;&#x5982;&#x679C;&#x9910;&#x9986;&#x6570;&#x91CF;&#x7279;&#x522B;&#x591A;&#xFF0C;&#x8FD9;&#x6837;&#x9700;&#x8981;&#x5927;&#x91CF;&#x7684;&#x5C1D;&#x8BD5;&#xFF0C;&#x6548;&#x7387;&#x592A;&#x4F4E;&#x3002;<br><strong>&#x5229;&#x7528;</strong>&#xFF1A;&#x6211;&#x4EEC;&#x53EA;&#x9009;&#x62E9;&#x5DF2;&#x7ECF;&#x638C;&#x63E1;&#x8BC4;&#x4EF7;&#x4FE1;&#x606F;&#x7684;&#x9910;&#x9986;&#x3002;&#x6700;&#x5927;&#x4F53;&#x9A8C;&#x88AB;&#x9650;&#x5236;&#xFF0C;&#x5982;&#x679C;&#x4F53;&#x9A8C;&#x6B21;&#x6570;&#x592A;&#x591A;&#xFF0C;&#x4F1A;&#x5E26;&#x6765;&#x4F53;&#x9A8C;&#x4E0B;&#x964D;&#x7684;&#x98CE;&#x9669;&#x3002;</p><p>&#x6298;&#x4E2D;&#x7684;&#x7B56;&#x7565;&#x662F;&#xFF1A;&#x5927;&#x90E8;&#x5206;&#x65F6;&#x95F4;&#x5229;&#x7528;&#xFF08;exploitation&#xFF09;&#xFF0C;&#x540C;&#x65F6;&#x4EE5;&#x4E00;&#x5B9A;&#x7684;&#x6982;&#x7387;&#x63A2;&#x7D22;&#xFF08;exploration&#xFF09;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x63A2;&#x7D22;-&#x5229;&#x7528;&#x5E73;&#x8861;&#x3002;</p></blockquote><h1>&#x6392;&#x5E8F;&#x6A21;&#x578B;</h1><p>&#x6392;&#x5E8F;&#x6A21;&#x578B;&#x662F;&#x5728;&#x5019;&#x9009;&#x751F;&#x6210;&#x6A21;&#x578B;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x5B9E;&#x73B0;&#x5BF9;&#x7C97;&#x7B5B;&#x4E4B;&#x540E;&#x7684;&#x5019;&#x9009;&#x89C6;&#x9891;&#x7684;&#x7CBE;&#x51C6;&#x6392;&#x5E8F;&#x3002;&#x5728;&#x6A21;&#x578B;&#x8BBE;&#x8BA1;&#x4E0A;&#xFF0C;&#x6392;&#x5E8F;&#x6A21;&#x578B;&#x91C7;&#x7528;&#x4E86;&#x548C;&#x5019;&#x9009;&#x751F;&#x6210;&#x6A21;&#x578B;&#x7C7B;&#x4F3C;&#x7684;&#x6A21;&#x578B;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x6A21;&#x578B;&#x7684;&#x8F93;&#x5165;&#x5C42;&#x548C;&#x8F93;&#x51FA;&#x5C42;&#x8FDB;&#x884C;&#x4E86;&#x4FEE;&#x6539;&#x3002;</p><h2>&#x6A21;&#x578B;&#x7ED3;&#x6784;</h2><img src="/2019/09/15/paper-reading-youtube-dnn-recommendation/ranking.png" title="&#x6392;&#x5E8F;&#x6A21;&#x578B;"><h2>&#x6A21;&#x578B;&#x8F93;&#x5165;</h2><p>&#x4E0D;&#x540C;&#x4E8E;&#x5019;&#x9009;&#x751F;&#x6210;&#x6A21;&#x578B;&#x9700;&#x8981;&#x5BF9;&#x6D77;&#x91CF;&#x7684;&#x89C6;&#x9891;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x8BA1;&#x7B97;&#xFF0C;&#x6392;&#x5E8F;&#x6A21;&#x578B;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x53EA;&#x662F;&#x7ECF;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x7C97;&#x7B5B;&#x4E4B;&#x540E;&#x5F97;&#x5230;&#x7684;&#x5C0F;&#x89C4;&#x6A21;&#x89C6;&#x9891;&#x96C6;&#x5408;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6392;&#x5E8F;&#x6A21;&#x578B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x7684;&#x7279;&#x5F81;&#x4F5C;&#x4E3A;&#x6A21;&#x578B;&#x7684;&#x8F93;&#x5165;&#xFF0C;&#x4EE5;&#x671F;&#x8FBE;&#x5230;&#x66F4;&#x4E3A;&#x7CBE;&#x51C6;&#x7684;&#x6392;&#x5E8F;&#x76EE;&#x7684;&#x3002;</p><p>&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5019;&#x9009;&#x96C6;&#x751F;&#x6210;&#x6A21;&#x578B;&#x6700;&#x7EC8;&#x662F;&#x4E3A;&#x4E86;&#x5F97;&#x5230;&#x7528;&#x6237;&#x548C;&#x89C6;&#x9891;&#x7684;&#x5411;&#x91CF;&#xFF0C;&#x800C;&#x6392;&#x5E8F;&#x6A21;&#x578B;&#x5C31;&#x662F;&#x5BF9;&#x6700;&#x7EC8;&#x7528;&#x6237;&#x662F;&#x5426;&#x4F1A;&#x70B9;&#x51FB;&#x89C6;&#x9891;&#x8FDB;&#x884C;&#x9884;&#x6D4B;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x4E24;&#x8005;&#x8F93;&#x5165;&#x7279;&#x5F81;&#x7684;&#x6784;&#x6210;&#x4E5F;&#x662F;&#x6709;&#x533A;&#x522B;&#x7684;&#x3002;</p><h3>&#x6837;&#x672C;&#x7279;&#x5F81;</h3><p>&#x5F85;&#x9884;&#x6D4B;&#x89C6;&#x9891;&#x7684;ID&#x3001;&#x7528;&#x6237;&#x5386;&#x53F2;&#x89C2;&#x770B;&#x89C6;&#x9891;&#x5217;&#x8868;&#x3001;&#x7528;&#x6237;&#x8BED;&#x8A00;&#x3001;&#x89C6;&#x9891;&#x8BED;&#x8A00;&#x3001;&#x6700;&#x8FD1;&#x89C6;&#x9891;&#x89C2;&#x770B;&#x65F6;&#x95F4;&#x3001;&#x5F85;&#x9884;&#x6D4B;&#x89C6;&#x9891;&#x7684;&#x5386;&#x53F2;&#x89C2;&#x770B;&#x6B21;&#x6570;</p><h3>&#x5173;&#x4E8E;&#x8F93;&#x5165;&#x7279;&#x5F81;&#x5904;&#x7406;&#x7684;&#x4E00;&#x4E9B;&#x6280;&#x5DE7;</h3><ul><li><p>&#x5BF9;&#x540C;&#x6E90;&#x7279;&#x5F81;&#x4F7F;&#x7528;&#x7F16;&#x7801;&#x7684;&#x5171;&#x4EAB;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6A21;&#x578B;&#x8BAD;&#x7EC3;&#x7684;&#x52A0;&#x901F;&#x548C;&#x6548;&#x679C;&#x63D0;&#x5347;</p><ul><li>&#x4F8B;&#x5982;&#x7528;&#x6237;&#x8BED;&#x8A00;&#x548C;&#x89C6;&#x9891;&#x8BED;&#x8A00;&#x3001;&#x5F85;&#x9884;&#x6D4B;&#x89C6;&#x9891;ID&#x548C;&#x5386;&#x53F2;&#x89C2;&#x770B;&#x89C6;&#x9891;ID&#x5217;&#x8868;&#x8FD9;&#x79CD;&#xFF0C;&#x5C5E;&#x4E8E;&#x540C;&#x6E90;&#x7279;&#x5F81;</li></ul></li><li><p>&#x8FDE;&#x7EED;&#x7279;&#x5F81;&#x53EF;&#x4EE5;&#x589E;&#x52A0;&#x5BF9;&#x7279;&#x5F81;&#x7684;&#x5F00;&#x65B9;&#x3001;&#x5E73;&#x65B9;&#xFF0C;&#x4EE5;&#x6316;&#x6398;&#x7279;&#x5F81;&#x7684;&#x975E;&#x7EBF;&#x6027;&#x5173;&#x7CFB;</p><ul><li>&#x4F8B;&#x5982;&#x6700;&#x8FD1;&#x89C6;&#x9891;&#x89C2;&#x770B;&#x65F6;&#x95F4;&#x3001;&#x5F85;&#x9884;&#x6D4B;&#x89C6;&#x9891;&#x7684;&#x5386;&#x53F2;&#x89C2;&#x770B;&#x6B21;&#x6570;</li></ul></li></ul><h2>&#x6A21;&#x578B;&#x8F93;&#x51FA;</h2><p>&#x6392;&#x5E8F;&#x6A21;&#x578B;&#x89E3;&#x51B3;&#x7684;&#x662F;&#x70B9;&#x51FB;&#x9884;&#x6D4B;&#x7684;&#x4E8C;&#x5206;&#x7C7B;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x6700;&#x7EC8;&#x8F93;&#x51FA;&#x4F7F;&#x7528;&#x4E86;&#x7ECF;&#x5178;&#x7684;logistics&#xFF1A;</p><p>$$ P(y=1) = \dfrac {1} {1 + e^{-(Wx+b)}} $$</p><p>&#x4F46;&#x662F;&#x4E3A;&#x4E86;&#x8FBE;&#x5230;&#x66F4;&#x76F4;&#x63A5;&#x7684;&#x63A8;&#x8350;&#x6548;&#x679C;&#xFF0C;&#x6392;&#x5E8F;&#x6A21;&#x578B;&#x5E94;&#x8BE5;&#x80FD;&#x591F;&#x628A;&#x90A3;&#x4E9B;&#x671F;&#x671B;&#x89C2;&#x770B;&#x65F6;&#x95F4;&#x66F4;&#x957F;&#x7684;&#x89C6;&#x9891;&#x5C3D;&#x91CF;&#x5F80;&#x524D;&#x6392;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5728;&#x6A21;&#x578B;&#x8BAD;&#x7EC3;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5BF9;&#x635F;&#x5931;&#x51FD;&#x6570;&#x52A0;&#x5165;&#x4E86;&#x89C6;&#x9891;&#x89C2;&#x770B;&#x65F6;&#x957F;$T$&#x7684;&#x52A0;&#x6743;&#xFF1A;</p><p>$$ loss = \dfrac {1} {N} * \sum^{N}_{i=1} {T_i} [y log P(y=1) + (1 - y) log (1 - P(y=1))] $$</p><p>&#x8FD9;&#x91CC;&#x7684;$N$&#x8868;&#x793A;&#x6837;&#x672C;&#x6570;&#x91CF;&#x3002;&#x9700;&#x8981;&#x8BF4;&#x660E;&#x7684;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x8D1F;&#x6837;&#x672C;&#x7684;$T_i=1$&#x3002;</p><p>&#x7EBF;&#x4E0A;&#x670D;&#x52A1;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x516C;&#x5F0F;&#x6765;&#x9884;&#x6D4B;&#x89C6;&#x9891;&#x7684;&#x671F;&#x671B;&#x89C2;&#x770B;&#x65F6;&#x957F;&#xFF1A;</p><p>$$ E[T] = e^{Wx + b} $$</p><h3>&#x7EBF;&#x4E0A;&#x9884;&#x6D4B;&#x516C;&#x5F0F;&#x7684;&#x63A8;&#x5BFC;</h3><p>$$ odds = \dfrac {P(y=1)} {1 - P(y=1)} = \dfrac {\sum T_i} {N - k} = \dfrac {\dfrac {1} {N} * \sum T_i} {1 - \dfrac {k} {N}} = \dfrac {E[T]} {1 - clickRate}  \approx E[T]  $$</p><p>$$ odds = \dfrac {P(y=1)} {1 - P(y=1)} = \dfrac {\dfrac {1} {1 + e^{-(Wx+b)}}} {1 - \dfrac {1} {1 + e^{-(Wx+b)}}} = \dfrac {1} {1 + e^{-(Wx+b)} - 1} = e^{Wx+b} $$</p><h1>&#x603B;&#x7ED3;</h1><p>&#x8FD9;&#x7BC7;&#x8BBA;&#x6587;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x5E72;&#x8D27;&#x6EE1;&#x6EE1;&#x3002;&#x867D;&#x7136;&#x6A21;&#x578B;&#x8BBE;&#x8BA1;&#x5E76;&#x6CA1;&#x6709;&#x7ED9;&#x4EBA;&#x773C;&#x524D;&#x4E00;&#x4EAE;&#x7684;&#x611F;&#x89C9;&#xFF0C;&#x4F46;&#x662F;&#x6587;&#x7AE0;&#x4E2D;&#x7ED9;&#x51FA;&#x7684;&#x5F88;&#x591A;&#x77E5;&#x8BC6;&#x70B9;&#x8FD8;&#x662F;&#x5F88;&#x503C;&#x5F97;&#x5DE5;&#x4E1A;&#x754C;&#x5B66;&#x4E60;&#x7684;&#x3002;&#x5927;&#x5BB6;&#x6709;&#x65F6;&#x95F4;&#x53EF;&#x4EE5;&#x62DC;&#x8BFB;&#x4E00;&#x4E0B;&#x539F;&#x6587;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x80FD;&#x5BF9;&#x5927;&#x5BB6;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;&#x539F;&#x4F5C;&#x63D0;&#x4F9B;&#x5E2E;&#x52A9;&#x3002;</p>]]></content>
      
      
      <categories>
          
          <category> paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dnn recommendation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简明Markdown语法</title>
      <link href="/2019/09/08/simple-markdown-syntax/"/>
      <url>/2019/09/08/simple-markdown-syntax/</url>
      
        <content type="html"><![CDATA[<p><a name="inner-link" id="&#x4F60;&#x770B;&#x4E0D;&#x89C1;&#x6211;&#xFF0C;&#x54C8;&#x54C8;&#x54C8;~"></a></p><blockquote><p>&#x5DE5;&#x6B32;&#x5584;&#x5176;&#x4E8B;&#xFF0C;&#x5FC5;&#x5148;&#x5229;&#x5176;&#x5668;</p></blockquote><p>&#x65E2;&#x7136;&#x5F00;&#x59CB;&#x4E13;&#x5FC3;&#x5199;&#x535A;&#x5BA2;&#xFF0C;&#x81EA;&#x7136;&#x5C31;&#x9700;&#x8981;&#x5BF9;markdown&#x7684;&#x8BED;&#x6CD5;&#x4E86;&#x7136;&#x4E8E;&#x80F8;&#x3002;&#x4E4B;&#x524D;&#x867D;&#x7136;&#x4E5F;&#x7528;&#x8FC7;&#x4E00;&#x4E9B;&#x7279;&#x6027;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x603B;&#x5F52;&#x4E0D;&#x80FD;&#x6709;&#x4E00;&#x79CD;&#x9A7E;&#x8F7B;&#x5C31;&#x719F;&#x7684;&#x611F;&#x89C9;&#x3002;&#x4F5C;&#x4E3A;&#x535A;&#x5BA2;&#x7684;&#x5F00;&#x7BC7;&#x4E4B;&#x4F5C;&#xFF0C;&#x4ECA;&#x5929;&#x5C31;&#x597D;&#x597D;&#x8BF4;&#x9053;&#x8BF4;&#x9053;&#x3002;&#xFF08;&#x4E00;&#x4E2A;&#x6709;&#x610F;&#x601D;&#x7684;&#x4E8B;&#x60C5;&#x662F;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x4E5F;&#x662F;&#x7528;markdown&#x8BED;&#x8A00;&#x5199;&#x7684;&#xFF09;</p><a id="more"></a><p>&#x76EE;&#x524D;&#x5E02;&#x9762;&#x4E0A;&#x5BF9;markdown&#x7684;&#x5B9E;&#x73B0;&#x6709;&#x5F88;&#x591A;&#x7248;&#x672C;&#xFF0C;&#x672C;&#x7740;&#x4ECE;&#x7B80;&#x53BB;&#x7E41;&#x3001;&#x901A;&#x7528;&#x9AD8;&#x6548;&#x7684;&#x539F;&#x5219;&#xFF0C;&#x7ECF;&#x8FC7;&#x591A;&#x65B9;&#x5BF9;&#x6BD4;&#xFF0C;&#x6700;&#x7EC8;&#x9009;&#x62E9;&#x4E86;Github&#x5B98;&#x65B9;&#x7684;markdown&#x5B9E;&#x73B0;&#x7248;&#x672C;&#x3002;<a href="https://help.github.com/en/articles/basic-writing-and-formatting-syntax" target="_blank" rel="noopener">Github&#x5B98;&#x65B9;&#x8BED;&#x6CD5;&#x89C4;&#x8303;</a></p><p>&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x4E0A;&#x83DC;&#xFF01;</p><h1>1. &#x6807;&#x9898;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># &#x4E00;&#x7EA7;&#x6807;&#x9898;  </span><br><span class="line">## &#x4E8C;&#x7EA7;&#x6807;&#x9898;</span><br><span class="line">### &#x4E09;&#x7EA7;&#x6807;&#x9898;</span><br><span class="line">#### &#x56DB;&#x7EA7;&#x6807;&#x9898;</span><br><span class="line">##### &#x4E94;&#x7EA7;&#x6807;&#x9898;</span><br><span class="line">###### &#x516D;&#x7EA7;&#x6807;&#x9898;</span><br></pre></td></tr></table></figure><h1>&#x4E00;&#x7EA7;&#x6807;&#x9898;</h1><h2>&#x4E8C;&#x7EA7;&#x6807;&#x9898;</h2><h3>&#x4E09;&#x7EA7;&#x6807;&#x9898;</h3><h4>&#x56DB;&#x7EA7;&#x6807;&#x9898;</h4><h5>&#x4E94;&#x7EA7;&#x6807;&#x9898;</h5><h6>&#x516D;&#x7EA7;&#x6807;&#x9898;</h6><h1>2. &#x6587;&#x672C;&#x98CE;&#x683C;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">**&#x7C97;&#x4F53;&#x98CE;&#x683C;**</span><br><span class="line"></span><br><span class="line">*&#x659C;&#x4F53;&#x98CE;&#x683C;*</span><br><span class="line"></span><br><span class="line">~~&#x5220;&#x9664;&#x7EBF;&#x98CE;&#x683C;~~</span><br><span class="line"></span><br><span class="line">**&#x7C97;&#x4F53;&#x5D4C;&#x5957; _&#x659C;&#x4F53;_ &#x98CE;&#x683C;**</span><br><span class="line"></span><br><span class="line">***&#x53C8;&#x7C97;&#x53C8;&#x659C;&#x4F53;&#x98CE;&#x683C;***</span><br></pre></td></tr></table></figure><p><strong>&#x7C97;&#x4F53;&#x98CE;&#x683C;</strong></p><p><em>&#x659C;&#x4F53;&#x98CE;&#x683C;</em></p><p><s>&#x5220;&#x9664;&#x7EBF;&#x98CE;&#x683C;</s></p><p><strong>&#x7C97;&#x4F53;&#x5D4C;&#x5957; <em>&#x659C;&#x4F53;</em> &#x98CE;&#x683C;</strong></p><p><strong><em>&#x53C8;&#x7C97;&#x53C8;&#x659C;&#x4F53;&#x98CE;&#x683C;</em></strong></p><h1>3. &#x6587;&#x672C;&#x5F15;&#x7528;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x6587;&#x672C;&#x5F15;&#x7528;&#x5185;&#x4E5F;&#x53EF;&#x4EE5;&#x52A0;&#x5165;&#x5176;&#x5B83;markdown&#x8BED;&#x6CD5;</span><br><span class="line"></span><br><span class="line">&gt; ## &#x540D;&#x4EBA;&#x540D;&#x8A00;</span><br><span class="line">&gt; &#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5199;&#x7684;&#x771F;&#x4ED6;&#x5988;&#x900F;&#x5F7B;&#x3002; &#x2014;&#x2014; &#x9C81;&#x8FC5;</span><br><span class="line">&gt; &gt; &#x4E0A;&#x9762;&#x7684;&#x4E0D;&#x662F;&#x6211;&#x8BF4;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x6211;+1&#x3002; &#x2014;&#x2014; &#x9C81;&#x8FC5;</span><br></pre></td></tr></table></figure><blockquote><h2>&#x540D;&#x4EBA;&#x540D;&#x8A00;</h2><p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5199;&#x7684;&#x771F;&#x4ED6;&#x5988;&#x900F;&#x5F7B;&#x3002; &#x2014;&#x2014; &#x9C81;&#x8FC5;</p><blockquote><p>&#x4E0A;&#x9762;&#x7684;&#x4E0D;&#x662F;&#x6211;&#x8BF4;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x6211;+1&#x3002; &#x2014;&#x2014; &#x9C81;&#x8FC5;</p></blockquote></blockquote><h1>4. &#x4EE3;&#x7801;&#x5F15;&#x7528;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x4E0B;&#x9762;&#x7528;&#x7684;&#x90FD;&#x662F;&#x53CD;&#x5F15;&#x53F7;&#xFF08;&#x952E;&#x76D8;&#x5DE6;&#x4E0A;&#x89D2;&#xFF0C;esc&#x4E0B;&#x9762;&#x90A3;&#x4E2A;&#xFF09;</span><br><span class="line"></span><br><span class="line">shell&#x547D;&#x4EE4;&#x793A;&#x4F8B;&#xFF1A;`rm -rf /`</span><br><span class="line"></span><br><span class="line">&#x4E3A;&#x4E86;&#x4E0D;&#x5F15;&#x8D77;&#x89E3;&#x6790;&#x9519;&#x8BEF;&#xFF0C;&#x4E0B;&#x9762;&#x7528;&apos;&#x4EE3;&#x66FF;&#x4E86;`(&#x65E0;&#x5948;&#x4E4B;&#x4E3E;)</span><br><span class="line">&apos;&apos;&apos;python</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">print(&quot;&#x4EE3;&#x7801;&#x5757;&#x6307;&#x5B9A;&#x8BED;&#x8A00;&#xFF0C;&#x53EF;&#x4EE5;&#x9AD8;&#x4EAE;&#x663E;&#x793A;&#x54E6;&quot;)</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure><p>shell&#x547D;&#x4EE4;&#x793A;&#x4F8B;&#xFF1A;<code>rm -rf /</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">print(<span class="string">&quot;&#x4EE3;&#x7801;&#x5757;&#x6307;&#x5B9A;&#x8BED;&#x8A00;&#xFF0C;&#x53EF;&#x4EE5;&#x9AD8;&#x4EAE;&#x663E;&#x793A;&#x54E6;&quot;</span>)</span><br></pre></td></tr></table></figure><h1>5. &#x94FE;&#x63A5;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x8BA9;&#x6211;&#x4EEC;&#x5C4F;&#x4F4F;&#x547C;&#x5438;&#xFF0C;[&#x4E00;&#x8D77;&#x56DE;&#x5230;&#x6700;&#x521D;&#x7684;&#x8D77;&#x70B9;](#inner-link)&#x3002;&#x8FD9;&#x4E2A;&#x9700;&#x8981;&#x5728;&#x9875;&#x9762;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x951A;&#x70B9;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x8FD9;&#x6837;`&lt;a name=&apos;inner-line&apos;&gt;&lt;/a&gt;`</span><br><span class="line"></span><br><span class="line">&lt;https://ritchie.top&gt;</span><br><span class="line"></span><br><span class="line">&lt;god@ritchie.top&gt;</span><br><span class="line"></span><br><span class="line">&#x70B9;&#x51FB;&#x8FDB;&#x5165;[Ritchie&apos;s Blog](https://ritchie.top)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x6709;&#x60AC;&#x6D6E;&#x7684;&#x70B9;&#x51FB;&#x8FD9;&#x91CC;[Ritchie&apos;s Blog][any_flag]</span><br><span class="line"></span><br><span class="line">[any_flag]: https://ritchie.top &quot;Ritchie&apos;s Blog(optional)&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">any_flag&#x90FD;&#x61D2;&#x5F97;&#x5199;&#x7684;&#x70B9;&#x51FB;&#x8FD9;&#x91CC;[Ritchie&apos;s Blog][]</span><br><span class="line"></span><br><span class="line">[ritchie&apos;s blog]: https://ritchie.top &quot;Ritchie&apos;s Blog(optional)&quot;</span><br></pre></td></tr></table></figure><p>&#x8BA9;&#x6211;&#x4EEC;&#x5C4F;&#x4F4F;&#x547C;&#x5438;&#xFF0C;<a href="#inner-link">&#x4E00;&#x8D77;&#x56DE;&#x5230;&#x6700;&#x521D;&#x7684;&#x8D77;&#x70B9;</a>&#x3002;&#x8FD9;&#x4E2A;&#x9700;&#x8981;&#x5728;&#x9875;&#x9762;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x951A;&#x70B9;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x8FD9;&#x6837;<code>&lt;a name=&apos;inner-line&apos;&gt;&lt;/a&gt;</code></p><p><a href="https://ritchie.top" target="_blank" rel="noopener">https://ritchie.top</a></p><p><a href="mailto:god@ritchie.top" target="_blank" rel="noopener">god@ritchie.top</a></p><p>&#x70B9;&#x51FB;&#x8FDB;&#x5165;<a href="https://ritchie.top" target="_blank" rel="noopener">Ritchie&#x2019;s Blog</a></p><p>&#x6709;&#x60AC;&#x6D6E;&#x7684;&#x70B9;&#x51FB;&#x8FD9;&#x91CC;<a href="https://ritchie.top" title="Ritchie&apos;s Blog(optional)" target="_blank" rel="noopener">Ritchie&#x2019;s Blog</a></p><p>any_flag&#x90FD;&#x61D2;&#x5F97;&#x5199;&#x7684;&#x70B9;&#x51FB;&#x8FD9;&#x91CC;<a href="https://ritchie.top" title="Ritchie&apos;s Blog(optional)" target="_blank" rel="noopener">Ritchie&#x2019;s Blog</a></p><h1>6. &#x56FE;&#x7247;</h1><p>&#x7528;&#x6CD5;&#x540C;&#x63D2;&#x5165;&#x8D85;&#x94FE;&#x63A5;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x6700;&#x524D;&#x9762;&#x591A;&#x4E2A;&#x4E00;&#x4E2A;&#x611F;&#x53F9;&#x53F7;!</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">markdown&#x76EE;&#x524D;&#x7684;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x8BED;&#x6CD5;&#xFF0C;&#x4E0D;&#x80FD;&#x8BBE;&#x7F6E;&#x56FE;&#x7247;&#x7684;&#x5177;&#x4F53;&#x53C2;&#x6570;&#xFF0C;&#x9700;&#x8981;html&#x6807;&#x7B7E;&#x914D;&#x5408;&#x652F;&#x6301;</span><br><span class="line"></span><br><span class="line">![&#x56FE;&#x7247;&#x7F3A;&#x5931;&#x65F6;&#x663E;&#x793A;&#x7684;&#x6587;&#x5B57;](https://ritchie.top/images/post/markdown.gif)</span><br><span class="line"></span><br><span class="line">![&#x798F;&#x5229;&#x4E0D;&#x89C1;&#x4E86;](https://ritchie.top/&#x798F;&#x5229;.jpeg)</span><br><span class="line"></span><br><span class="line">[![&#x5E26;&#x6709;&#x94FE;&#x63A5;&#x7684;&#x56FE;&#x7247;](https://ritchie.top/images/post/markdown2.gif)](http://ritchie.top)</span><br></pre></td></tr></table></figure><p><img src="https://ritchie.top/images/post/markdown.gif" alt="&#x56FE;&#x7247;&#x7F3A;&#x5931;&#x65F6;&#x663E;&#x793A;&#x7684;&#x6587;&#x5B57;"></p><p><img src="https://ritchie.top/%E7%A6%8F%E5%88%A9.jpeg" alt="&#x798F;&#x5229;&#x4E0D;&#x89C1;&#x4E86;"></p><p><a href="http://ritchie.top" target="_blank" rel="noopener"><img src="https://ritchie.top/images/post/markdown2.gif" alt="&#x5E26;&#x6709;&#x94FE;&#x63A5;&#x7684;&#x56FE;&#x7247;"></a></p><h1>7. &#x5217;&#x8868;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">- &#x65E0;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line">- &#x65E0;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line"></span><br><span class="line">    &gt; &#x65E0;&#x5E8F;&#x5217;&#x8868;&#x6BB5;&#x843D;</span><br><span class="line"></span><br><span class="line">    &#x65E0;&#x5E8F;&#x5217;&#x8868;&#x6BB5;&#x843D;</span><br><span class="line">- &#x65E0;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line">    - &#x65E0;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line">        - &#x65E0;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line">            - &#x65E0;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line"></span><br><span class="line">1. &#x6709;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line">2. &#x6709;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line"></span><br><span class="line">    &#x6709;&#x5E8F;&#x5217;&#x8868;&#x6BB5;&#x843D;</span><br><span class="line"></span><br><span class="line">    &#x6709;&#x5E8F;&#x5217;&#x8868;&#x6BB5;&#x843D;</span><br><span class="line">3. &#x6709;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line"></span><br><span class="line">    &gt; 1. &#x6709;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line">    &gt; 2. &#x6709;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line"></span><br><span class="line">4. &#x6709;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line">    - &#x65E0;&#x5E8F;&#x5217;&#x8868;</span><br><span class="line">        - &#x65E0;&#x5E8F;&#x5217;&#x8868;</span><br></pre></td></tr></table></figure><ul><li><p>&#x65E0;&#x5E8F;&#x5217;&#x8868;</p></li><li><p>&#x65E0;&#x5E8F;&#x5217;&#x8868;</p><blockquote><p>&#x65E0;&#x5E8F;&#x5217;&#x8868;&#x6BB5;&#x843D;</p></blockquote><p>&#x65E0;&#x5E8F;&#x5217;&#x8868;&#x6BB5;&#x843D;</p></li><li><p>&#x65E0;&#x5E8F;&#x5217;&#x8868;</p><ul><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;<ul><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;<ul><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;</li></ul></li></ul></li></ul></li></ul><ol><li><p>&#x6709;&#x5E8F;&#x5217;&#x8868;</p></li><li><p>&#x6709;&#x5E8F;&#x5217;&#x8868;</p><p>&#x6709;&#x5E8F;&#x5217;&#x8868;&#x6BB5;&#x843D;</p><p>&#x6709;&#x5E8F;&#x5217;&#x8868;&#x6BB5;&#x843D;</p></li><li><p>&#x6709;&#x5E8F;&#x5217;&#x8868;</p><blockquote><ol><li>&#x6709;&#x5E8F;&#x5217;&#x8868;</li><li>&#x6709;&#x5E8F;&#x5217;&#x8868;</li></ol></blockquote></li><li><p>&#x6709;&#x5E8F;&#x5217;&#x8868;</p><ul><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;<ul><li>&#x65E0;&#x5E8F;&#x5217;&#x8868;</li></ul></li></ul></li></ol><h1>8. &#x6BB5;&#x843D;&#x548C;&#x6362;&#x884C;</h1><p>&#x6BB5;&#x843D;&#x65E0;&#x9996;&#x884C;&#x7F29;&#x8FDB;&#xFF0C;&#x6BB5;&#x843D;&#x4E4B;&#x95F4;&#x901A;&#x8FC7;<strong>&#x4E00;&#x4E2A;&#x7A7A;&#x884C;</strong>&#x5206;&#x5272;&#xFF08;&#x591A;&#x4E2A;&#x7A7A;&#x884C;&#x6548;&#x679C;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x4E00;&#x6837;&#x7684;&#xFF09;</p><p>&#x4E00;&#x4E2A;&#x6BB5;&#x843D;&#x5185;&#x7684;&#x6362;&#x884C;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x4E00;&#x884C;&#x7684;&#x7ED3;&#x5C3E;&#x6DFB;&#x52A0;<strong>&#x4E24;&#x4E2A;&#x7A7A;&#x683C;</strong>&#xFF08;&#x591A;&#x5199;&#x51E0;&#x4E2A;&#x7A7A;&#x683C;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF09;</p><h1>9. &#x8F6C;&#x4E49;&#x7B26;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">**&#x8FD9;&#x662F;&#x4E2A;&#x7C97;&#x4F53;**</span><br><span class="line"></span><br><span class="line">\*\*&#x8FD9;&#x4E0D;&#x662F;&#x4E2A;&#x7C97;&#x4F53;\*\*</span><br></pre></td></tr></table></figure><p><strong>&#x8FD9;&#x662F;&#x4E2A;&#x7C97;&#x4F53;</strong></p><p>**&#x8FD9;&#x4E0D;&#x662F;&#x4E2A;&#x7C97;&#x4F53;**</p><h1>10. &#x5206;&#x5272;&#x7EBF;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x7741;&#x5927;&#x773C;&#xFF0C;&#x77A7;&#x4ED4;&#x7EC6;&#xFF0C;&#x4E0B;&#x9762;&#x80AF;&#x5B9A;&#x6709;&#x6761;&#x5206;&#x5272;&#x7EBF;</span><br><span class="line"></span><br><span class="line">* * * (&#x6700;&#x5C11;&#x4E09;&#x4E2A;)</span><br></pre></td></tr></table></figure><hr><h1>11. &#x516C;&#x5F0F;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$$ y = \sum_{i=n}{x_i} $$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">\left[</span><br><span class="line">\begin{matrix}</span><br><span class="line">   1 &amp; 2 &amp; 3 \\\\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\\\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">\end{matrix}</span><br><span class="line">\right] </span><br><span class="line">\tag{n}</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>$$ y = \sum_{i=n}{x_i} $$</p><p>$$<br>\left[<br>\begin{matrix}<br>1 &amp; 2 &amp; 3 \\<br>4 &amp; 5 &amp; 6 \\<br>7 &amp; 8 &amp; 9<br>\end{matrix}<br>\right]<br>\tag{n}<br>$$</p><h1>12. &#x8868;&#x683C;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">| &#x9ED8;&#x8BA4;&#x5BF9;&#x9F50; | &#x5C45;&#x4E2D;&#x5BF9;&#x9F50;  | &#x53F3;&#x5BF9;&#x9F50; |</span><br><span class="line">| --------|:-------:| -----:|</span><br><span class="line">| &#x5BF9;&#x9F50;&#x7684;&#x77ED;&#x7EBF;&#x6700;&#x5C11;&#x8981;&#x5199;&#x4E09;&#x4E2A;| &#x540C;&#x5217;&#x5185;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x4E00;&#x81F4;  | &#x70EB;&#x70EB;&#x70EB; |</span><br><span class="line">| &#x5217;&#x5BBD;&#x662F;&#x6839;&#x636E;&#x5185;&#x5BB9;&#x81EA;&#x9002;&#x5E94;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x53EF;&#x4EE5;&#x5F88;&#x5BBD;| **&#x4F7F;&#x7528;&#x6587;&#x672C;&#x88C5;&#x9970;**|&#x4E0D;&#x77E5;&#x9053;&#x5199;&#x5565;&#x4E86;|</span><br></pre></td></tr></table></figure><table><thead><tr><th>&#x9ED8;&#x8BA4;&#x5BF9;&#x9F50;</th><th style="text-align:center">&#x5C45;&#x4E2D;&#x5BF9;&#x9F50;</th><th style="text-align:right">&#x53F3;&#x5BF9;&#x9F50;</th></tr></thead><tbody><tr><td>&#x5BF9;&#x9F50;&#x7684;&#x77ED;&#x7EBF;&#x6700;&#x5C11;&#x8981;&#x5199;&#x4E09;&#x4E2A;</td><td style="text-align:center">&#x540C;&#x5217;&#x5185;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x4E00;&#x81F4;</td><td style="text-align:right">&#x70EB;&#x70EB;&#x70EB;</td></tr><tr><td>&#x5217;&#x5BBD;&#x662F;&#x6839;&#x636E;&#x5185;&#x5BB9;&#x81EA;&#x9002;&#x5E94;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x53EF;&#x4EE5;&#x5F88;&#x5BBD;</td><td style="text-align:center"><strong>&#x4F7F;&#x7528;&#x6587;&#x672C;&#x88C5;&#x9970;</strong></td><td style="text-align:right">&#x4E0D;&#x77E5;&#x9053;&#x5199;&#x5565;&#x4E86;</td></tr></tbody></table><h1>13. &#x8868;&#x60C5;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x4F9D;&#x8D56;&#x63D2;&#x4EF6;&#xFF1A;hexo-article-emoji</span><br><span class="line">&#x8868;&#x60C5;&#x5E93;&#xFF1A;/node-modules/hexo-article-emoji/lib/data/full.json</span><br><span class="line">&#x7528;&#x6CD5;&#xFF1A;</span><br><span class="line">    &#x7ED9;&#x5927;&#x7237;&#x4E50;&#x4E00;&#x4E2A;&#xFF01;:smile: :smiley: :grinning:</span><br></pre></td></tr></table></figure><p>&#x7ED9;&#x5927;&#x7237;&#x4E50;&#x4E00;&#x4E2A;&#xFF01;<img width="20" height="20" class="emoji nofancybox" title=":smile:" alt="&#x1F604;" src="/images/emoji/smile.png" style="display:inline;padding:0px;vertical-align:middle;"> <img width="20" height="20" class="emoji nofancybox" title=":smiley:" alt="&#x1F603;" src="/images/emoji/smiley.png" style="display:inline;padding:0px;vertical-align:middle;"> <img width="20" height="20" class="emoji nofancybox" title=":grinning:" alt="&#x1F600;" src="/images/emoji/grinning.png" style="display:inline;padding:0px;vertical-align:middle;"></p><h1>14. &#x811A;&#x6CE8;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x6240;&#x6709;&#x7684;&#x811A;&#x6CE8;&#x4F1A;&#x81EA;&#x52A8;&#x653E;&#x5230;&#x6574;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x672B;&#x5C3E;</span><br><span class="line"></span><br><span class="line">&#x5B50;&#x66F0;&#xFF1A;&#x9760;&#xFF01;&#x70B9;&#x811A;&#x6CE8;&#x80FD;&#x8DF3;&#x8F6C;[^1]</span><br><span class="line"></span><br><span class="line">[^1]: &#x300A;&#x8BBA;&#x8BED;&#x300B;</span><br></pre></td></tr></table></figure><p>&#x5B50;&#x66F0;&#xFF1A;&#x9760;&#xFF01;&#x70B9;&#x811A;&#x6CE8;&#x80FD;&#x8DF3;&#x8F6C;<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h1>15. &#x603B;&#x7ED3;</h1><p>&#x524D;&#x9762;&#x5BF9;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x8BED;&#x6CD5;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x793A;&#x4F8B;&#x603B;&#x7ED3;&#xFF0C;&#x540E;&#x9762;&#x518D;&#x6709;&#x65B0;&#x7684;&#x9700;&#x6C42;&#x518D;&#x6765;&#x8865;&#x5145;&#x3002;&#x5148;&#x8FD9;&#x6837;&#xFF01;</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>&#x300A;&#x8BBA;&#x8BED;&#x300B; <a href="#fnref1" class="footnote-backref">&#x21A9;</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
